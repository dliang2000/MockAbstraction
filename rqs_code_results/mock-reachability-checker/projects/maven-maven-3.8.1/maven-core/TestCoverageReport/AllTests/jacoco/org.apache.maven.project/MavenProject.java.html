<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>MavenProject.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Maven Core</a> &gt; <a href="index.source.html" class="el_package">org.apache.maven.project</a> &gt; <span class="el_source">MavenProject.java</span></div><h1>MavenProject.java</h1><pre class="source lang-java linenums">package org.apache.maven.project;

/*
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * &quot;License&quot;); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */

import java.io.File;
import java.io.IOException;
import java.io.Writer;
import java.util.ArrayList;
import java.util.Collections;
import java.util.HashMap;
import java.util.LinkedHashMap;
import java.util.LinkedHashSet;
import java.util.List;
import java.util.Map;
import java.util.Properties;
import java.util.Set;
import java.util.Objects;

import org.apache.maven.RepositoryUtils;
import org.apache.maven.artifact.Artifact;
import org.apache.maven.artifact.ArtifactUtils;
import org.apache.maven.artifact.DependencyResolutionRequiredException;
// remove once createArtifacts() is removed
import org.apache.maven.artifact.factory.ArtifactFactory;
import org.apache.maven.artifact.repository.ArtifactRepository;
import org.apache.maven.artifact.resolver.filter.ArtifactFilter;
import org.apache.maven.model.Build;
import org.apache.maven.model.CiManagement;
import org.apache.maven.model.Contributor;
import org.apache.maven.model.Dependency;
import org.apache.maven.model.DependencyManagement;
import org.apache.maven.model.Developer;
import org.apache.maven.model.DistributionManagement;
import org.apache.maven.model.Extension;
import org.apache.maven.model.IssueManagement;
import org.apache.maven.model.License;
import org.apache.maven.model.MailingList;
import org.apache.maven.model.Model;
import org.apache.maven.model.Organization;
import org.apache.maven.model.Plugin;
import org.apache.maven.model.PluginExecution;
import org.apache.maven.model.PluginManagement;
import org.apache.maven.model.Prerequisites;
import org.apache.maven.model.Profile;
import org.apache.maven.model.ReportPlugin;
import org.apache.maven.model.ReportSet;
import org.apache.maven.model.Reporting;
import org.apache.maven.model.Repository;
import org.apache.maven.model.Resource;
import org.apache.maven.model.Scm;
import org.apache.maven.model.io.xpp3.MavenXpp3Writer;
import org.apache.maven.project.artifact.InvalidDependencyVersionException;
import org.apache.maven.project.artifact.MavenMetadataSource;
import org.codehaus.plexus.classworlds.realm.ClassRealm;
import org.codehaus.plexus.util.xml.Xpp3Dom;
import org.eclipse.aether.graph.DependencyFilter;
import org.eclipse.aether.repository.RemoteRepository;

/**
 * The concern of the project is provide runtime values based on the model.
 * &lt;p&gt;
 * The values in the model remain untouched but during the process of building a project notions like inheritance and
 * interpolation can be added. This allows to have an entity which is useful in a runtime while preserving the model so
 * that it can be marshalled and unmarshalled without being tainted by runtime requirements.
 * &lt;/p&gt;
 * &lt;p&gt;
 * With changes during 3.2.2 release MavenProject is closer to being immutable after construction with the removal of
 * all components from this class, and the upfront construction taken care of entirely by the {@link ProjectBuilder}.
 * There is still the issue of having to run the lifecycle in order to find all the compile source roots and resource
 * directories but I hope to take care of this during the Maven 4.0 release (jvz).
 * &lt;/p&gt;
 */
public class MavenProject
    implements Cloneable
{
    public static final String EMPTY_PROJECT_GROUP_ID = &quot;unknown&quot;;

    public static final String EMPTY_PROJECT_ARTIFACT_ID = &quot;empty-project&quot;;

    public static final String EMPTY_PROJECT_VERSION = &quot;0&quot;;

    private Model model;

    private MavenProject parent;

    private File file;

    private File basedir;

    private Set&lt;Artifact&gt; resolvedArtifacts;

    private ArtifactFilter artifactFilter;

    private Set&lt;Artifact&gt; artifacts;

    private Artifact parentArtifact;

    private Set&lt;Artifact&gt; pluginArtifacts;

    private List&lt;ArtifactRepository&gt; remoteArtifactRepositories;

    private List&lt;ArtifactRepository&gt; pluginArtifactRepositories;

    private List&lt;RemoteRepository&gt; remoteProjectRepositories;

    private List&lt;RemoteRepository&gt; remotePluginRepositories;

    private List&lt;Artifact&gt; attachedArtifacts;

    private MavenProject executionProject;

    private List&lt;MavenProject&gt; collectedProjects;

<span class="pc" id="L131">    private List&lt;String&gt; compileSourceRoots = new ArrayList&lt;&gt;();</span>

<span class="pc" id="L133">    private List&lt;String&gt; testCompileSourceRoots = new ArrayList&lt;&gt;();</span>

<span class="pc" id="L135">    private List&lt;String&gt; scriptSourceRoots = new ArrayList&lt;&gt;();</span>

    private ArtifactRepository releaseArtifactRepository;

    private ArtifactRepository snapshotArtifactRepository;

<span class="pc" id="L141">    private List&lt;Profile&gt; activeProfiles = new ArrayList&lt;&gt;();</span>

<span class="pc" id="L143">    private Map&lt;String, List&lt;String&gt;&gt; injectedProfileIds = new LinkedHashMap&lt;&gt;();</span>

    private Set&lt;Artifact&gt; dependencyArtifacts;

    private Artifact artifact;

    // calculated.
    private Map&lt;String, Artifact&gt; artifactMap;

    private Model originalModel;

    private Map&lt;String, Artifact&gt; pluginArtifactMap;

    private Set&lt;Artifact&gt; reportArtifacts;

    private Map&lt;String, Artifact&gt; reportArtifactMap;

    private Set&lt;Artifact&gt; extensionArtifacts;

    private Map&lt;String, Artifact&gt; extensionArtifactMap;

    private Map&lt;String, Artifact&gt; managedVersionMap;

<span class="pc" id="L166">    private Map&lt;String, MavenProject&gt; projectReferences = new HashMap&lt;&gt;();</span>

    private boolean executionRoot;

    private File parentFile;

    private Map&lt;String, Object&gt; context;

    private ClassRealm classRealm;

    private DependencyFilter extensionDependencyFilter;

<span class="pc" id="L178">    private final Set&lt;String&gt; lifecyclePhases = Collections.synchronizedSet( new LinkedHashSet&lt;String&gt;() );</span>

    public MavenProject()
<span class="fc" id="L181">    {</span>
<span class="fc" id="L182">        Model model = new Model();</span>

<span class="fc" id="L184">        model.setGroupId( EMPTY_PROJECT_GROUP_ID );</span>
<span class="fc" id="L185">        model.setArtifactId( EMPTY_PROJECT_ARTIFACT_ID );</span>
<span class="fc" id="L186">        model.setVersion( EMPTY_PROJECT_VERSION );</span>

<span class="fc" id="L188">        setModel( model );</span>
<span class="fc" id="L189">    }</span>

    public MavenProject( Model model )
<span class="fc" id="L192">    {</span>
<span class="fc" id="L193">        setModel( model );</span>
<span class="fc" id="L194">    }</span>

    public MavenProject( MavenProject project )
<span class="nc" id="L197">    {</span>
<span class="nc" id="L198">        deepCopy( project );</span>
<span class="nc" id="L199">    }</span>

    public File getParentFile()
    {
<span class="fc" id="L203">        return parentFile;</span>
    }

    public void setParentFile( File parentFile )
    {
<span class="fc" id="L208">        this.parentFile = parentFile;</span>
<span class="fc" id="L209">    }</span>

    // ----------------------------------------------------------------------
    // Accessors
    // ----------------------------------------------------------------------

    public Artifact getArtifact()
    {
<span class="fc" id="L217">        return artifact;</span>
    }

    public void setArtifact( Artifact artifact )
    {
<span class="fc" id="L222">        this.artifact = artifact;</span>
<span class="fc" id="L223">    }</span>

    // TODO I would like to get rid of this. jvz.
    public Model getModel()
    {
<span class="fc" id="L228">        return model;</span>
    }

    /**
     * Returns the project corresponding to a declared parent.
     *
     * @return the parent, or null if no parent is declared or there was an error building it
     */
    public MavenProject getParent()
    {
<span class="fc" id="L238">        return parent;</span>
    }

    public void setParent( MavenProject parent )
    {
<span class="fc" id="L243">        this.parent = parent;</span>
<span class="fc" id="L244">    }</span>

    public boolean hasParent()
    {
<span class="nc bnc" id="L248" title="All 2 branches missed.">        return getParent() != null;</span>
    }

    public File getFile()
    {
<span class="fc" id="L253">        return file;</span>
    }

    public void setFile( File file )
    {
<span class="fc" id="L258">        this.file = file;</span>
<span class="fc bfc" id="L259" title="All 2 branches covered.">        this.basedir = file != null ? file.getParentFile() : null;</span>
<span class="fc" id="L260">    }</span>

    /**
     * Sets project {@code file} without changing project {@code basedir}.
     *
     * @since 3.2.4
     */
    public void setPomFile( File file )
    {
<span class="fc" id="L269">        this.file = file;</span>
<span class="fc" id="L270">    }</span>

    public File getBasedir()
    {
<span class="fc" id="L274">        return basedir;</span>
    }

    public void setDependencies( List&lt;Dependency&gt; dependencies )
    {
<span class="fc" id="L279">        getModel().setDependencies( dependencies );</span>
<span class="fc" id="L280">    }</span>

    public List&lt;Dependency&gt; getDependencies()
    {
<span class="fc" id="L284">        return getModel().getDependencies();</span>
    }

    public DependencyManagement getDependencyManagement()
    {
<span class="fc" id="L289">        return getModel().getDependencyManagement();</span>
    }

    // ----------------------------------------------------------------------
    // Test and compile sourceroots.
    // ----------------------------------------------------------------------

    private void addPath( List&lt;String&gt; paths, String path )
    {
<span class="pc bpc" id="L298" title="1 of 2 branches missed.">        if ( path != null )</span>
        {
<span class="fc" id="L300">            path = path.trim();</span>
<span class="pc bpc" id="L301" title="1 of 2 branches missed.">            if ( path.length() &gt; 0 )</span>
            {
<span class="fc" id="L303">                File file = new File( path );</span>
<span class="fc bfc" id="L304" title="All 2 branches covered.">                if ( file.isAbsolute() )</span>
                {
<span class="fc" id="L306">                    path = file.getAbsolutePath();</span>
                }
<span class="pc bpc" id="L308" title="1 of 2 branches missed.">                else if ( &quot;.&quot;.equals( path ) )</span>
                {
<span class="fc" id="L310">                    path = getBasedir().getAbsolutePath();</span>
                }
                else
                {
<span class="nc" id="L314">                    path = new File( getBasedir(), path ).getAbsolutePath();</span>
                }

<span class="fc bfc" id="L317" title="All 2 branches covered.">                if ( !paths.contains( path ) )</span>
                {
<span class="fc" id="L319">                    paths.add( path );</span>
                }
            }
        }
<span class="fc" id="L323">    }</span>

    public void addCompileSourceRoot( String path )
    {
<span class="fc" id="L327">        addPath( getCompileSourceRoots(), path );</span>
<span class="fc" id="L328">    }</span>

    public void addTestCompileSourceRoot( String path )
    {
<span class="fc" id="L332">        addPath( getTestCompileSourceRoots(), path );</span>
<span class="fc" id="L333">    }</span>

    public List&lt;String&gt; getCompileSourceRoots()
    {
<span class="fc" id="L337">        return compileSourceRoots;</span>
    }

    public List&lt;String&gt; getTestCompileSourceRoots()
    {
<span class="fc" id="L342">        return testCompileSourceRoots;</span>
    }

    public List&lt;String&gt; getCompileClasspathElements()
        throws DependencyResolutionRequiredException
    {
<span class="fc" id="L348">        List&lt;String&gt; list = new ArrayList&lt;&gt;( getArtifacts().size() + 1 );</span>

<span class="fc" id="L350">        String d = getBuild().getOutputDirectory();</span>
<span class="fc bfc" id="L351" title="All 2 branches covered.">        if ( d != null )</span>
        {
<span class="fc" id="L353">            list.add( d );</span>
        }

<span class="fc bfc" id="L356" title="All 2 branches covered.">        for ( Artifact a : getArtifacts() )</span>
        {
<span class="pc bpc" id="L358" title="1 of 2 branches missed.">            if ( a.getArtifactHandler().isAddedToClasspath() )</span>
            {
                // TODO let the scope handler deal with this
<span class="pc bpc" id="L361" title="2 of 4 branches missed.">                if ( Artifact.SCOPE_COMPILE.equals( a.getScope() ) || Artifact.SCOPE_PROVIDED.equals( a.getScope() )</span>
<span class="pc bpc" id="L362" title="1 of 2 branches missed.">                    || Artifact.SCOPE_SYSTEM.equals( a.getScope() ) )</span>
                {
<span class="fc" id="L364">                    addArtifactPath( a, list );</span>
                }
            }
<span class="fc" id="L367">        }</span>

<span class="fc" id="L369">        return list;</span>
    }

    // TODO this checking for file == null happens because the resolver has been confused about the root
    // artifact or not. things like the stupid dummy artifact coming from surefire.
    public List&lt;String&gt; getTestClasspathElements()
        throws DependencyResolutionRequiredException
    {
<span class="fc" id="L377">        List&lt;String&gt; list = new ArrayList&lt;&gt;( getArtifacts().size() + 2 );</span>

<span class="fc" id="L379">        String d = getBuild().getTestOutputDirectory();</span>
<span class="pc bpc" id="L380" title="1 of 2 branches missed.">        if ( d != null )</span>
        {
<span class="nc" id="L382">            list.add( d );</span>
        }

<span class="fc" id="L385">        d = getBuild().getOutputDirectory();</span>
<span class="pc bpc" id="L386" title="1 of 2 branches missed.">        if ( d != null )</span>
        {
<span class="nc" id="L388">            list.add( d );</span>
        }

<span class="pc bpc" id="L391" title="1 of 2 branches missed.">        for ( Artifact a : getArtifacts() )</span>
        {
<span class="nc bnc" id="L393" title="All 2 branches missed.">            if ( a.getArtifactHandler().isAddedToClasspath() )</span>
            {
<span class="nc" id="L395">                addArtifactPath( a, list );</span>
            }
<span class="nc" id="L397">        }</span>

<span class="fc" id="L399">        return list;</span>
    }

    public List&lt;String&gt; getRuntimeClasspathElements()
        throws DependencyResolutionRequiredException
    {
<span class="fc" id="L405">        List&lt;String&gt; list = new ArrayList&lt;&gt;( getArtifacts().size() + 1 );</span>

<span class="fc" id="L407">        String d = getBuild().getOutputDirectory();</span>
<span class="pc bpc" id="L408" title="1 of 2 branches missed.">        if ( d != null )</span>
        {
<span class="nc" id="L410">            list.add( d );</span>
        }

<span class="pc bpc" id="L413" title="1 of 2 branches missed.">        for ( Artifact a : getArtifacts() )</span>
        {
<span class="nc bnc" id="L415" title="All 2 branches missed.">            if ( a.getArtifactHandler().isAddedToClasspath()</span>
            // TODO let the scope handler deal with this
<span class="nc bnc" id="L417" title="All 4 branches missed.">                &amp;&amp; ( Artifact.SCOPE_COMPILE.equals( a.getScope() ) || Artifact.SCOPE_RUNTIME.equals( a.getScope() ) ) )</span>
            {
<span class="nc" id="L419">                addArtifactPath( a, list );</span>
            }
<span class="nc" id="L421">        }</span>
<span class="fc" id="L422">        return list;</span>
    }

    // ----------------------------------------------------------------------
    // Delegate to the model
    // ----------------------------------------------------------------------

    public void setModelVersion( String pomVersion )
    {
<span class="nc" id="L431">        getModel().setModelVersion( pomVersion );</span>
<span class="nc" id="L432">    }</span>

    public String getModelVersion()
    {
<span class="fc" id="L436">        return getModel().getModelVersion();</span>
    }

    public String getId()
    {
<span class="fc" id="L441">        return getModel().getId();</span>
    }

    public void setGroupId( String groupId )
    {
<span class="fc" id="L446">        getModel().setGroupId( groupId );</span>
<span class="fc" id="L447">    }</span>

    public String getGroupId()
    {
<span class="fc" id="L451">        String groupId = getModel().getGroupId();</span>

<span class="fc bfc" id="L453" title="All 4 branches covered.">        if ( ( groupId == null ) &amp;&amp; ( getModel().getParent() != null ) )</span>
        {
<span class="fc" id="L455">            groupId = getModel().getParent().getGroupId();</span>
        }

<span class="fc" id="L458">        return groupId;</span>
    }

    public void setArtifactId( String artifactId )
    {
<span class="fc" id="L463">        getModel().setArtifactId( artifactId );</span>
<span class="fc" id="L464">    }</span>

    public String getArtifactId()
    {
<span class="fc" id="L468">        return getModel().getArtifactId();</span>
    }

    public void setName( String name )
    {
<span class="nc" id="L473">        getModel().setName( name );</span>
<span class="nc" id="L474">    }</span>

    public String getName()
    {
        // TODO this should not be allowed to be null.
<span class="nc bnc" id="L479" title="All 2 branches missed.">        if ( getModel().getName() != null )</span>
        {
<span class="nc" id="L481">            return getModel().getName();</span>
        }
        else
        {
<span class="nc" id="L485">            return getArtifactId();</span>
        }
    }

    public void setVersion( String version )
    {
<span class="fc" id="L491">        getModel().setVersion( version );</span>
<span class="fc" id="L492">    }</span>

    public String getVersion()
    {
<span class="fc" id="L496">        String version = getModel().getVersion();</span>

<span class="fc bfc" id="L498" title="All 4 branches covered.">        if ( ( version == null ) &amp;&amp; ( getModel().getParent() != null ) )</span>
        {
<span class="fc" id="L500">            version = getModel().getParent().getVersion();</span>
        }

<span class="fc" id="L503">        return version;</span>
    }

    public String getPackaging()
    {
<span class="fc" id="L508">        return getModel().getPackaging();</span>
    }

    public void setPackaging( String packaging )
    {
<span class="nc" id="L513">        getModel().setPackaging( packaging );</span>
<span class="nc" id="L514">    }</span>

    public void setInceptionYear( String inceptionYear )
    {
<span class="nc" id="L518">        getModel().setInceptionYear( inceptionYear );</span>
<span class="nc" id="L519">    }</span>

    public String getInceptionYear()
    {
<span class="nc" id="L523">        return getModel().getInceptionYear();</span>
    }

    public void setUrl( String url )
    {
<span class="nc" id="L528">        getModel().setUrl( url );</span>
<span class="nc" id="L529">    }</span>

    public String getUrl()
    {
<span class="nc" id="L533">        return getModel().getUrl();</span>
    }

    public Prerequisites getPrerequisites()
    {
<span class="fc" id="L538">        return getModel().getPrerequisites();</span>
    }

    public void setIssueManagement( IssueManagement issueManagement )
    {
<span class="nc" id="L543">        getModel().setIssueManagement( issueManagement );</span>
<span class="nc" id="L544">    }</span>

    public CiManagement getCiManagement()
    {
<span class="nc" id="L548">        return getModel().getCiManagement();</span>
    }

    public void setCiManagement( CiManagement ciManagement )
    {
<span class="nc" id="L553">        getModel().setCiManagement( ciManagement );</span>
<span class="nc" id="L554">    }</span>

    public IssueManagement getIssueManagement()
    {
<span class="nc" id="L558">        return getModel().getIssueManagement();</span>
    }

    public void setDistributionManagement( DistributionManagement distributionManagement )
    {
<span class="nc" id="L563">        getModel().setDistributionManagement( distributionManagement );</span>
<span class="nc" id="L564">    }</span>

    public DistributionManagement getDistributionManagement()
    {
<span class="fc" id="L568">        return getModel().getDistributionManagement();</span>
    }

    public void setDescription( String description )
    {
<span class="nc" id="L573">        getModel().setDescription( description );</span>
<span class="nc" id="L574">    }</span>

    public String getDescription()
    {
<span class="nc" id="L578">        return getModel().getDescription();</span>
    }

    public void setOrganization( Organization organization )
    {
<span class="nc" id="L583">        getModel().setOrganization( organization );</span>
<span class="nc" id="L584">    }</span>

    public Organization getOrganization()
    {
<span class="nc" id="L588">        return getModel().getOrganization();</span>
    }

    public void setScm( Scm scm )
    {
<span class="nc" id="L593">        getModel().setScm( scm );</span>
<span class="nc" id="L594">    }</span>

    public Scm getScm()
    {
<span class="nc" id="L598">        return getModel().getScm();</span>
    }

    public void setMailingLists( List&lt;MailingList&gt; mailingLists )
    {
<span class="nc" id="L603">        getModel().setMailingLists( mailingLists );</span>
<span class="nc" id="L604">    }</span>

    public List&lt;MailingList&gt; getMailingLists()
    {
<span class="fc" id="L608">        return getModel().getMailingLists();</span>
    }

    public void addMailingList( MailingList mailingList )
    {
<span class="nc" id="L613">        getModel().addMailingList( mailingList );</span>
<span class="nc" id="L614">    }</span>

    public void setDevelopers( List&lt;Developer&gt; developers )
    {
<span class="nc" id="L618">        getModel().setDevelopers( developers );</span>
<span class="nc" id="L619">    }</span>

    public List&lt;Developer&gt; getDevelopers()
    {
<span class="nc" id="L623">        return getModel().getDevelopers();</span>
    }

    public void addDeveloper( Developer developer )
    {
<span class="nc" id="L628">        getModel().addDeveloper( developer );</span>
<span class="nc" id="L629">    }</span>

    public void setContributors( List&lt;Contributor&gt; contributors )
    {
<span class="nc" id="L633">        getModel().setContributors( contributors );</span>
<span class="nc" id="L634">    }</span>

    public List&lt;Contributor&gt; getContributors()
    {
<span class="nc" id="L638">        return getModel().getContributors();</span>
    }

    public void addContributor( Contributor contributor )
    {
<span class="nc" id="L643">        getModel().addContributor( contributor );</span>
<span class="nc" id="L644">    }</span>

    public void setBuild( Build build )
    {
<span class="nc" id="L648">        getModel().setBuild( build );</span>
<span class="nc" id="L649">    }</span>

    public Build getBuild()
    {
<span class="fc" id="L653">        return getModelBuild();</span>
    }

    public List&lt;Resource&gt; getResources()
    {
<span class="fc" id="L658">        return getBuild().getResources();</span>
    }

    public List&lt;Resource&gt; getTestResources()
    {
<span class="nc" id="L663">        return getBuild().getTestResources();</span>
    }

    public void addResource( Resource resource )
    {
<span class="nc" id="L668">        getBuild().addResource( resource );</span>
<span class="nc" id="L669">    }</span>

    public void addTestResource( Resource testResource )
    {
<span class="nc" id="L673">        getBuild().addTestResource( testResource );</span>
<span class="nc" id="L674">    }</span>

    public void setLicenses( List&lt;License&gt; licenses )
    {
<span class="nc" id="L678">        getModel().setLicenses( licenses );</span>
<span class="nc" id="L679">    }</span>

    public List&lt;License&gt; getLicenses()
    {
<span class="nc" id="L683">        return getModel().getLicenses();</span>
    }

    public void addLicense( License license )
    {
<span class="nc" id="L688">        getModel().addLicense( license );</span>
<span class="nc" id="L689">    }</span>

    public void setArtifacts( Set&lt;Artifact&gt; artifacts )
    {
<span class="fc" id="L693">        this.artifacts = artifacts;</span>

        // flush the calculated artifactMap
<span class="fc" id="L696">        artifactMap = null;</span>
<span class="fc" id="L697">    }</span>

    /**
     * All dependencies that this project has, including transitive ones. Contents are lazily populated, so depending on
     * what phases have run dependencies in some scopes won't be included. eg. if only compile phase has run,
     * dependencies with scope test won't be included.
     *
     * @return {@link Set} &amp;lt; {@link Artifact} &amp;gt;
     * @see #getDependencyArtifacts() to get only direct dependencies
     */
    public Set&lt;Artifact&gt; getArtifacts()
    {
<span class="fc bfc" id="L709" title="All 2 branches covered.">        if ( artifacts == null )</span>
        {
<span class="pc bpc" id="L711" title="1 of 4 branches missed.">            if ( artifactFilter == null || resolvedArtifacts == null )</span>
            {
<span class="fc" id="L713">                artifacts = new LinkedHashSet&lt;&gt;();</span>
            }
            else
            {
<span class="fc" id="L717">                artifacts = new LinkedHashSet&lt;&gt;( resolvedArtifacts.size() * 2 );</span>
<span class="fc bfc" id="L718" title="All 2 branches covered.">                for ( Artifact artifact : resolvedArtifacts )</span>
                {
<span class="pc bpc" id="L720" title="1 of 2 branches missed.">                    if ( artifactFilter.include( artifact ) )</span>
                    {
<span class="fc" id="L722">                        artifacts.add( artifact );</span>
                    }
<span class="fc" id="L724">                }</span>
            }
        }
<span class="fc" id="L727">        return artifacts;</span>
    }

    public Map&lt;String, Artifact&gt; getArtifactMap()
    {
<span class="pc bpc" id="L732" title="1 of 2 branches missed.">        if ( artifactMap == null )</span>
        {
<span class="fc" id="L734">            artifactMap = ArtifactUtils.artifactMapByVersionlessId( getArtifacts() );</span>
        }
<span class="fc" id="L736">        return artifactMap;</span>
    }

    public void setPluginArtifacts( Set&lt;Artifact&gt; pluginArtifacts )
    {
<span class="fc" id="L741">        this.pluginArtifacts = pluginArtifacts;</span>

<span class="fc" id="L743">        this.pluginArtifactMap = null;</span>
<span class="fc" id="L744">    }</span>

    public Set&lt;Artifact&gt; getPluginArtifacts()
    {
<span class="fc" id="L748">        return pluginArtifacts;</span>
    }

    public Map&lt;String, Artifact&gt; getPluginArtifactMap()
    {
<span class="nc bnc" id="L753" title="All 2 branches missed.">        if ( pluginArtifactMap == null )</span>
        {
<span class="nc" id="L755">            pluginArtifactMap = ArtifactUtils.artifactMapByVersionlessId( getPluginArtifacts() );</span>
        }

<span class="nc" id="L758">        return pluginArtifactMap;</span>
    }

    public void setParentArtifact( Artifact parentArtifact )
    {
<span class="fc" id="L763">        this.parentArtifact = parentArtifact;</span>
<span class="fc" id="L764">    }</span>

    public Artifact getParentArtifact()
    {
<span class="fc" id="L768">        return parentArtifact;</span>
    }

    public List&lt;Repository&gt; getRepositories()
    {
<span class="nc" id="L773">        return getModel().getRepositories();</span>
    }

    // ----------------------------------------------------------------------
    // Plugins
    // ----------------------------------------------------------------------

    public List&lt;Plugin&gt; getBuildPlugins()
    {
<span class="fc bfc" id="L782" title="All 2 branches covered.">        if ( getModel().getBuild() == null )</span>
        {
<span class="fc" id="L784">            return Collections.emptyList();</span>
        }
<span class="fc" id="L786">        return Collections.unmodifiableList( getModel().getBuild().getPlugins() );</span>
    }

    public List&lt;String&gt; getModules()
    {
<span class="fc" id="L791">        return getModel().getModules();</span>
    }

    public PluginManagement getPluginManagement()
    {
<span class="fc" id="L796">        PluginManagement pluginMgmt = null;</span>

<span class="fc" id="L798">        Build build = getModel().getBuild();</span>
<span class="fc bfc" id="L799" title="All 2 branches covered.">        if ( build != null )</span>
        {
<span class="fc" id="L801">            pluginMgmt = build.getPluginManagement();</span>
        }

<span class="fc" id="L804">        return pluginMgmt;</span>
    }

    private Build getModelBuild()
    {
<span class="fc" id="L809">        Build build = getModel().getBuild();</span>

<span class="fc bfc" id="L811" title="All 2 branches covered.">        if ( build == null )</span>
        {
<span class="fc" id="L813">            build = new Build();</span>

<span class="fc" id="L815">            getModel().setBuild( build );</span>
        }

<span class="fc" id="L818">        return build;</span>
    }

    public void setRemoteArtifactRepositories( List&lt;ArtifactRepository&gt; remoteArtifactRepositories )
    {
<span class="fc" id="L823">        this.remoteArtifactRepositories = remoteArtifactRepositories;</span>
<span class="fc" id="L824">        this.remoteProjectRepositories = RepositoryUtils.toRepos( getRemoteArtifactRepositories() );</span>
<span class="fc" id="L825">    }</span>

    public List&lt;ArtifactRepository&gt; getRemoteArtifactRepositories()
    {
<span class="pc bpc" id="L829" title="1 of 2 branches missed.">        if ( remoteArtifactRepositories == null )</span>
        {
<span class="nc" id="L831">            remoteArtifactRepositories = new ArrayList&lt;&gt;();</span>
        }

<span class="fc" id="L834">        return remoteArtifactRepositories;</span>
    }

    public void setPluginArtifactRepositories( List&lt;ArtifactRepository&gt; pluginArtifactRepositories )
    {
<span class="fc" id="L839">        this.pluginArtifactRepositories = pluginArtifactRepositories;</span>
<span class="fc" id="L840">        this.remotePluginRepositories = RepositoryUtils.toRepos( getPluginArtifactRepositories() );</span>
<span class="fc" id="L841">    }</span>

    /**
     * @return a list of ArtifactRepository objects constructed from the Repository objects returned by
     *         getPluginRepositories.
     */
    public List&lt;ArtifactRepository&gt; getPluginArtifactRepositories()
    {
<span class="pc bpc" id="L849" title="1 of 2 branches missed.">        if ( pluginArtifactRepositories == null )</span>
        {
<span class="nc" id="L851">            pluginArtifactRepositories = new ArrayList&lt;&gt;();</span>
        }

<span class="fc" id="L854">        return pluginArtifactRepositories;</span>
    }

    public ArtifactRepository getDistributionManagementArtifactRepository()
    {
<span class="pc bpc" id="L859" title="2 of 4 branches missed.">        return getArtifact().isSnapshot() &amp;&amp; ( getSnapshotArtifactRepository() != null )</span>
<span class="pc" id="L860">                        ? getSnapshotArtifactRepository()</span>
<span class="nc" id="L861">                        : getReleaseArtifactRepository();</span>
    }

    public List&lt;Repository&gt; getPluginRepositories()
    {
<span class="nc" id="L866">        return getModel().getPluginRepositories();</span>
    }

    public List&lt;RemoteRepository&gt; getRemoteProjectRepositories()
    {
<span class="fc" id="L871">        return remoteProjectRepositories;</span>
    }

    public List&lt;RemoteRepository&gt; getRemotePluginRepositories()
    {
<span class="fc" id="L876">        return remotePluginRepositories;</span>
    }

    public void setActiveProfiles( List&lt;Profile&gt; activeProfiles )
    {
<span class="fc" id="L881">        this.activeProfiles = activeProfiles;</span>
<span class="fc" id="L882">    }</span>

    public List&lt;Profile&gt; getActiveProfiles()
    {
<span class="fc" id="L886">        return activeProfiles;</span>
    }

    public void setInjectedProfileIds( String source, List&lt;String&gt; injectedProfileIds )
    {
<span class="pc bpc" id="L891" title="1 of 2 branches missed.">        if ( injectedProfileIds != null )</span>
        {
<span class="fc" id="L893">            this.injectedProfileIds.put( source, new ArrayList&lt;&gt;( injectedProfileIds ) );</span>
        }
        else
        {
<span class="nc" id="L897">            this.injectedProfileIds.remove( source );</span>
        }
<span class="fc" id="L899">    }</span>

    /**
     * Gets the identifiers of all profiles that contributed to this project's effective model. This includes active
     * profiles from the project's POM and all its parent POMs as well as from external sources like the
     * {@code settings.xml}. The profile identifiers are grouped by the identifier of their source, e.g.
     * {@code &lt;groupId&gt;:&lt;artifactId&gt;:&lt;version&gt;} for a POM profile or {@code external} for profiles from the
     * {@code settings.xml}.
     *
     * @return The identifiers of all injected profiles, indexed by the source from which the profiles originated, never
     *         {@code null}.
     */
    public Map&lt;String, List&lt;String&gt;&gt; getInjectedProfileIds()
    {
<span class="fc" id="L913">        return this.injectedProfileIds;</span>
    }

    /**
     * Add or replace an artifact. This method is now deprecated. Use the @{MavenProjectHelper} to attach artifacts to a
     * project. In spite of the 'throws' declaration on this API, this method has never thrown an exception since Maven
     * 3.0.x. Historically, it logged and ignored a second addition of the same g/a/v/c/t. Now it replaces the file for
     * the artifact, so that plugins (e.g. shade) can change the pathname of the file for a particular set of
     * coordinates.
     *
     * @param artifact the artifact to add or replace.
     * @throws DuplicateArtifactAttachmentException
     */
    public void addAttachedArtifact( Artifact artifact )
        throws DuplicateArtifactAttachmentException
    {
<span class="nc" id="L929">        getAttachedArtifacts().add( artifact );</span>
<span class="nc" id="L930">    }</span>

    public List&lt;Artifact&gt; getAttachedArtifacts()
    {
<span class="fc bfc" id="L934" title="All 2 branches covered.">        if ( attachedArtifacts == null )</span>
        {
<span class="fc" id="L936">            attachedArtifacts = new ArrayList&lt;&gt;();</span>
        }
<span class="fc" id="L938">        return attachedArtifacts;</span>
    }

    public Xpp3Dom getGoalConfiguration( String pluginGroupId, String pluginArtifactId, String executionId,
                                         String goalId )
    {
<span class="nc" id="L944">        Xpp3Dom dom = null;</span>

<span class="nc bnc" id="L946" title="All 2 branches missed.">        if ( getBuildPlugins() != null )</span>
        {
<span class="nc bnc" id="L948" title="All 2 branches missed.">            for ( Plugin plugin : getBuildPlugins() )</span>
            {
<span class="nc bnc" id="L950" title="All 4 branches missed.">                if ( pluginGroupId.equals( plugin.getGroupId() ) &amp;&amp; pluginArtifactId.equals( plugin.getArtifactId() ) )</span>
                {
<span class="nc" id="L952">                    dom = (Xpp3Dom) plugin.getConfiguration();</span>

<span class="nc bnc" id="L954" title="All 2 branches missed.">                    if ( executionId != null )</span>
                    {
<span class="nc" id="L956">                        PluginExecution execution = plugin.getExecutionsAsMap().get( executionId );</span>
<span class="nc bnc" id="L957" title="All 2 branches missed.">                        if ( execution != null )</span>
                        {
                            // NOTE: The PluginConfigurationExpander already merged the plugin-level config in
<span class="nc" id="L960">                            dom = (Xpp3Dom) execution.getConfiguration();</span>
                        }
<span class="nc" id="L962">                    }</span>
                    break;
                }
<span class="nc" id="L965">            }</span>
        }

<span class="nc bnc" id="L968" title="All 2 branches missed.">        if ( dom != null )</span>
        {
            // make a copy so the original in the POM doesn't get messed with
<span class="nc" id="L971">            dom = new Xpp3Dom( dom );</span>
        }

<span class="nc" id="L974">        return dom;</span>
    }

    public MavenProject getExecutionProject()
    {
<span class="pc bpc" id="L979" title="1 of 2 branches missed.">        return ( executionProject == null ? this : executionProject );</span>
    }

    public void setExecutionProject( MavenProject executionProject )
    {
<span class="nc" id="L984">        this.executionProject = executionProject;</span>
<span class="nc" id="L985">    }</span>

    public List&lt;MavenProject&gt; getCollectedProjects()
    {
<span class="nc" id="L989">        return collectedProjects;</span>
    }

    public void setCollectedProjects( List&lt;MavenProject&gt; collectedProjects )
    {
<span class="fc" id="L994">        this.collectedProjects = collectedProjects;</span>
<span class="fc" id="L995">    }</span>

    /**
     * Direct dependencies that this project has.
     *
     * @return {@link Set} &amp;lt; {@link Artifact} &amp;gt;
     * @see #getArtifacts() to get all transitive dependencies
     */
    @Deprecated
    public Set&lt;Artifact&gt; getDependencyArtifacts()
    {
<span class="fc" id="L1006">        return dependencyArtifacts;</span>
    }

    @Deprecated
    public void setDependencyArtifacts( Set&lt;Artifact&gt; dependencyArtifacts )
    {
<span class="fc" id="L1012">        this.dependencyArtifacts = dependencyArtifacts;</span>
<span class="fc" id="L1013">    }</span>

    public void setReleaseArtifactRepository( ArtifactRepository releaseArtifactRepository )
    {
<span class="fc" id="L1017">        this.releaseArtifactRepository = releaseArtifactRepository;</span>
<span class="fc" id="L1018">    }</span>

    public void setSnapshotArtifactRepository( ArtifactRepository snapshotArtifactRepository )
    {
<span class="fc" id="L1022">        this.snapshotArtifactRepository = snapshotArtifactRepository;</span>
<span class="fc" id="L1023">    }</span>

    public void setOriginalModel( Model originalModel )
    {
<span class="fc" id="L1027">        this.originalModel = originalModel;</span>
<span class="fc" id="L1028">    }</span>

    public Model getOriginalModel()
    {
<span class="fc" id="L1032">        return originalModel;</span>
    }

    public void setManagedVersionMap( Map&lt;String, Artifact&gt; map )
    {
<span class="fc" id="L1037">        managedVersionMap = map;</span>
<span class="fc" id="L1038">    }</span>

    public Map&lt;String, Artifact&gt; getManagedVersionMap()
    {
<span class="fc" id="L1042">        return managedVersionMap;</span>
    }

    @Override
    public boolean equals( Object other )
    {
<span class="fc bfc" id="L1048" title="All 2 branches covered.">        if ( other == this )</span>
        {
<span class="fc" id="L1050">            return true;</span>
        }
<span class="pc bpc" id="L1052" title="1 of 2 branches missed.">        else if ( !( other instanceof MavenProject ) )</span>
        {
<span class="nc" id="L1054">            return false;</span>
        }

<span class="fc" id="L1057">        MavenProject that = (MavenProject) other;</span>

<span class="pc bpc" id="L1059" title="1 of 2 branches missed.">        return Objects.equals( getArtifactId(), that.getArtifactId() )</span>
<span class="nc bnc" id="L1060" title="All 2 branches missed.">            &amp;&amp; Objects.equals( getGroupId(), that.getGroupId() ) </span>
<span class="pc bnc" id="L1061" title="All 2 branches missed.">            &amp;&amp; Objects.equals( getVersion(), that.getVersion() );</span>
    }

    @Override
    public int hashCode()
    {
<span class="fc" id="L1067">        int hash = 17;</span>
<span class="fc" id="L1068">        hash = 31 * hash + getGroupId().hashCode();</span>
<span class="fc" id="L1069">        hash = 31 * hash + getArtifactId().hashCode();</span>
<span class="fc" id="L1070">        hash = 31 * hash + getVersion().hashCode();</span>
<span class="fc" id="L1071">        return hash;</span>
    }

    public List&lt;Extension&gt; getBuildExtensions()
    {
<span class="fc" id="L1076">        Build build = getBuild();</span>
<span class="pc bpc" id="L1077" title="2 of 4 branches missed.">        if ( ( build == null ) || ( build.getExtensions() == null ) )</span>
        {
<span class="nc" id="L1079">            return Collections.emptyList();</span>
        }
        else
        {
<span class="fc" id="L1083">            return Collections.unmodifiableList( build.getExtensions() );</span>
        }
    }

    public void addProjectReference( MavenProject project )
    {
<span class="fc" id="L1089">        projectReferences.put( getProjectReferenceId( project.getGroupId(), project.getArtifactId(),</span>
<span class="fc" id="L1090">                                                      project.getVersion() ), project );</span>
<span class="fc" id="L1091">    }</span>

    public Properties getProperties()
    {
<span class="fc" id="L1095">        return getModel().getProperties();</span>
    }

    public List&lt;String&gt; getFilters()
    {
<span class="nc" id="L1100">        return getBuild().getFilters();</span>
    }

    public Map&lt;String, MavenProject&gt; getProjectReferences()
    {
<span class="nc" id="L1105">        return projectReferences;</span>
    }

    public boolean isExecutionRoot()
    {
<span class="fc" id="L1110">        return executionRoot;</span>
    }

    public void setExecutionRoot( boolean executionRoot )
    {
<span class="fc" id="L1115">        this.executionRoot = executionRoot;</span>
<span class="fc" id="L1116">    }</span>

    public String getDefaultGoal()
    {
<span class="nc bnc" id="L1120" title="All 2 branches missed.">        return getBuild() != null ? getBuild().getDefaultGoal() : null;</span>
    }

    public Plugin getPlugin( String pluginKey )
    {
<span class="fc" id="L1125">        return getBuild().getPluginsAsMap().get( pluginKey );</span>
    }

    /**
     * Default toString
     */
    @Override
    public String toString()
    {
<span class="nc" id="L1134">        StringBuilder sb = new StringBuilder( 128 );</span>
<span class="nc" id="L1135">        sb.append( &quot;MavenProject: &quot; );</span>
<span class="nc" id="L1136">        sb.append( getGroupId() );</span>
<span class="nc" id="L1137">        sb.append( ':' );</span>
<span class="nc" id="L1138">        sb.append( getArtifactId() );</span>
<span class="nc" id="L1139">        sb.append( ':' );</span>
<span class="nc" id="L1140">        sb.append( getVersion() );</span>
<span class="nc" id="L1141">        sb.append( &quot; @ &quot; );</span>

        try
        {
<span class="nc" id="L1145">            sb.append( getFile().getPath() );</span>
        }
<span class="nc" id="L1147">        catch ( NullPointerException e )</span>
        {
            // don't log it.
<span class="nc" id="L1150">        }</span>

<span class="nc" id="L1152">        return sb.toString();</span>
    }

    /**
     * @since 2.0.9
     */
    @Override
    public MavenProject clone()
    {
        MavenProject clone;
        try
        {
<span class="fc" id="L1164">            clone = (MavenProject) super.clone();</span>
        }
<span class="nc" id="L1166">        catch ( CloneNotSupportedException e )</span>
        {
<span class="nc" id="L1168">            throw new UnsupportedOperationException( e );</span>
<span class="fc" id="L1169">        }</span>

<span class="fc" id="L1171">        clone.deepCopy( this );</span>

<span class="fc" id="L1173">        return clone;</span>
    }

    public void setModel( Model model )
    {
<span class="fc" id="L1178">        this.model = model;</span>
<span class="fc" id="L1179">    }</span>

    protected void setAttachedArtifacts( List&lt;Artifact&gt; attachedArtifacts )
    {
<span class="fc" id="L1183">        this.attachedArtifacts = attachedArtifacts;</span>
<span class="fc" id="L1184">    }</span>

    protected void setCompileSourceRoots( List&lt;String&gt; compileSourceRoots )
    {
<span class="fc" id="L1188">        this.compileSourceRoots = compileSourceRoots;</span>
<span class="fc" id="L1189">    }</span>

    protected void setTestCompileSourceRoots( List&lt;String&gt; testCompileSourceRoots )
    {
<span class="fc" id="L1193">        this.testCompileSourceRoots = testCompileSourceRoots;</span>
<span class="fc" id="L1194">    }</span>

    protected ArtifactRepository getReleaseArtifactRepository()
    {
<span class="nc" id="L1198">        return releaseArtifactRepository;</span>
    }

    protected ArtifactRepository getSnapshotArtifactRepository()
    {
<span class="fc" id="L1203">        return snapshotArtifactRepository;</span>
    }

    private void deepCopy( MavenProject project )
    {
        // disown the parent

        // copy fields
<span class="fc" id="L1211">        file = project.file;</span>
<span class="fc" id="L1212">        basedir = project.basedir;</span>

        // don't need a deep copy, they don't get modified or added/removed to/from - but make them unmodifiable to be
        // sure!
<span class="pc bpc" id="L1216" title="1 of 2 branches missed.">        if ( project.getDependencyArtifacts() != null )</span>
        {
<span class="nc" id="L1218">            setDependencyArtifacts( Collections.unmodifiableSet( project.getDependencyArtifacts() ) );</span>
        }

<span class="pc bpc" id="L1221" title="1 of 2 branches missed.">        if ( project.getArtifacts() != null )</span>
        {
<span class="fc" id="L1223">            setArtifacts( Collections.unmodifiableSet( project.getArtifacts() ) );</span>
        }

<span class="pc bpc" id="L1226" title="1 of 2 branches missed.">        if ( project.getParentFile() != null )</span>
        {
<span class="nc" id="L1228">            parentFile = new File( project.getParentFile().getAbsolutePath() );</span>
        }

<span class="pc bpc" id="L1231" title="1 of 2 branches missed.">        if ( project.getPluginArtifacts() != null )</span>
        {
<span class="fc" id="L1233">            setPluginArtifacts( Collections.unmodifiableSet( project.getPluginArtifacts() ) );</span>
        }

<span class="pc bpc" id="L1236" title="1 of 2 branches missed.">        if ( project.getReportArtifacts() != null )</span>
        {
<span class="fc" id="L1238">            setReportArtifacts( Collections.unmodifiableSet( project.getReportArtifacts() ) );</span>
        }

<span class="pc bpc" id="L1241" title="1 of 2 branches missed.">        if ( project.getExtensionArtifacts() != null )</span>
        {
<span class="fc" id="L1243">            setExtensionArtifacts( Collections.unmodifiableSet( project.getExtensionArtifacts() ) );</span>
        }

<span class="fc" id="L1246">        setParentArtifact( ( project.getParentArtifact() ) );</span>

<span class="pc bpc" id="L1248" title="1 of 2 branches missed.">        if ( project.getRemoteArtifactRepositories() != null )</span>
        {
<span class="fc" id="L1250">            setRemoteArtifactRepositories( Collections.unmodifiableList( project.getRemoteArtifactRepositories() ) );</span>
        }

<span class="pc bpc" id="L1253" title="1 of 2 branches missed.">        if ( project.getPluginArtifactRepositories() != null )</span>
        {
<span class="fc" id="L1255">            setPluginArtifactRepositories( Collections.unmodifiableList( project.getPluginArtifactRepositories() ) );</span>
        }

<span class="pc bpc" id="L1258" title="1 of 2 branches missed.">        if ( project.getActiveProfiles() != null )</span>
        {
<span class="fc" id="L1260">            setActiveProfiles( ( Collections.unmodifiableList( project.getActiveProfiles() ) ) );</span>
        }

<span class="pc bpc" id="L1263" title="1 of 2 branches missed.">        if ( project.getAttachedArtifacts() != null )</span>
        {
            // clone properties modifyable by plugins in a forked lifecycle
<span class="fc" id="L1266">            setAttachedArtifacts( new ArrayList&lt;&gt;( project.getAttachedArtifacts() ) );</span>
        }

<span class="pc bpc" id="L1269" title="1 of 2 branches missed.">        if ( project.getCompileSourceRoots() != null )</span>
        {
            // clone source roots
<span class="fc" id="L1272">            setCompileSourceRoots( ( new ArrayList&lt;&gt;( project.getCompileSourceRoots() ) ) );</span>
        }

<span class="pc bpc" id="L1275" title="1 of 2 branches missed.">        if ( project.getTestCompileSourceRoots() != null )</span>
        {
<span class="fc" id="L1277">            setTestCompileSourceRoots( ( new ArrayList&lt;&gt;( project.getTestCompileSourceRoots() ) ) );</span>
        }

<span class="pc bpc" id="L1280" title="1 of 2 branches missed.">        if ( project.getScriptSourceRoots() != null )</span>
        {
<span class="fc" id="L1282">            setScriptSourceRoots( ( new ArrayList&lt;&gt;( project.getScriptSourceRoots() ) ) );</span>
        }

<span class="pc bpc" id="L1285" title="1 of 2 branches missed.">        if ( project.getModel() != null )</span>
        {
<span class="fc" id="L1287">            setModel( project.getModel().clone() );</span>
        }

<span class="pc bpc" id="L1290" title="1 of 2 branches missed.">        if ( project.getOriginalModel() != null )</span>
        {
<span class="fc" id="L1292">            setOriginalModel( project.getOriginalModel() );</span>
        }

<span class="fc" id="L1295">        setExecutionRoot( project.isExecutionRoot() );</span>

<span class="pc bpc" id="L1297" title="1 of 2 branches missed.">        if ( project.getArtifact() != null )</span>
        {
<span class="fc" id="L1299">            setArtifact( ArtifactUtils.copyArtifact( project.getArtifact() ) );</span>
        }

<span class="pc bpc" id="L1302" title="1 of 2 branches missed.">        if ( project.getManagedVersionMap() != null )</span>
        {
<span class="fc" id="L1304">            setManagedVersionMap( project.getManagedVersionMap() );</span>
        }

<span class="fc" id="L1307">        lifecyclePhases.addAll( project.lifecyclePhases );</span>
<span class="fc" id="L1308">    }</span>

    private void addArtifactPath( Artifact artifact, List&lt;String&gt; classpath )
    {
<span class="fc" id="L1312">        File file = artifact.getFile();</span>
<span class="pc bpc" id="L1313" title="1 of 2 branches missed.">        if ( file != null )</span>
        {
<span class="fc" id="L1315">            classpath.add( file.getPath() );</span>
        }
<span class="fc" id="L1317">    }</span>

    private static String getProjectReferenceId( String groupId, String artifactId, String version )
    {
<span class="fc" id="L1321">        StringBuilder buffer = new StringBuilder( 128 );</span>
<span class="fc" id="L1322">        buffer.append( groupId ).append( ':' ).append( artifactId ).append( ':' ).append( version );</span>
<span class="fc" id="L1323">        return buffer.toString();</span>
    }

    /**
     * Sets the value of the context value of this project identified by the given key. If the supplied value is
     * &lt;code&gt;null&lt;/code&gt;, the context value is removed from this project. Context values are intended to allow core
     * extensions to associate derived state with project instances.
     */
    public void setContextValue( String key, Object value )
    {
<span class="pc bpc" id="L1333" title="1 of 2 branches missed.">        if ( context == null )</span>
        {
<span class="fc" id="L1335">            context = new HashMap&lt;&gt;();</span>
        }
<span class="pc bpc" id="L1337" title="1 of 2 branches missed.">        if ( value != null )</span>
        {
<span class="fc" id="L1339">            context.put( key, value );</span>
        }
        else
        {
<span class="nc" id="L1343">            context.remove( key );</span>
        }
<span class="fc" id="L1345">    }</span>

    /**
     * Returns context value of this project associated with the given key or null if this project has no such value.
     */
    public Object getContextValue( String key )
    {
<span class="pc bpc" id="L1352" title="1 of 2 branches missed.">        if ( context == null )</span>
        {
<span class="fc" id="L1354">            return null;</span>
        }
<span class="nc" id="L1356">        return context.get( key );</span>
    }

    /**
     * Sets the project's class realm. &lt;strong&gt;Warning:&lt;/strong&gt; This is an internal utility method that is only public
     * for technical reasons, it is not part of the public API. In particular, this method can be changed or deleted
     * without prior notice and must not be used by plugins.
     *
     * @param classRealm The class realm hosting the build extensions of this project, may be {@code null}.
     */
    public void setClassRealm( ClassRealm classRealm )
    {
<span class="fc" id="L1368">        this.classRealm = classRealm;</span>
<span class="fc" id="L1369">    }</span>

    /**
     * Gets the project's class realm. This class realm hosts the build extensions of the project.
     * &lt;strong&gt;Warning:&lt;/strong&gt; This is an internal utility method that is only public for technical reasons, it is not
     * part of the public API. In particular, this method can be changed or deleted without prior notice and must not be
     * used by plugins.
     *
     * @return The project's class realm or {@code null}.
     */
    public ClassRealm getClassRealm()
    {
<span class="fc" id="L1381">        return classRealm;</span>
    }

    /**
     * Sets the artifact filter used to exclude shared extension artifacts from plugin realms. &lt;strong&gt;Warning:&lt;/strong&gt;
     * This is an internal utility method that is only public for technical reasons, it is not part of the public API.
     * In particular, this method can be changed or deleted without prior notice and must not be used by plugins.
     *
     * @param extensionDependencyFilter The dependency filter to apply to plugins, may be {@code null}.
     */
    public void setExtensionDependencyFilter( DependencyFilter extensionDependencyFilter )
    {
<span class="fc" id="L1393">        this.extensionDependencyFilter = extensionDependencyFilter;</span>
<span class="fc" id="L1394">    }</span>

    /**
     * Gets the dependency filter used to exclude shared extension artifacts from plugin realms.
     * &lt;strong&gt;Warning:&lt;/strong&gt; This is an internal utility method that is only public for technical reasons, it is not
     * part of the public API. In particular, this method can be changed or deleted without prior notice and must not be
     * used by plugins.
     *
     * @return The dependency filter or {@code null}.
     */
    public DependencyFilter getExtensionDependencyFilter()
    {
<span class="fc" id="L1406">        return extensionDependencyFilter;</span>
    }

    /**
     * Sets the transitive dependency artifacts that have been resolved/collected for this project.
     * &lt;strong&gt;Warning:&lt;/strong&gt; This is an internal utility method that is only public for technical reasons, it is not
     * part of the public API. In particular, this method can be changed or deleted without prior notice and must not be
     * used by plugins.
     *
     * @param artifacts The set of artifacts, may be {@code null}.
     */
    public void setResolvedArtifacts( Set&lt;Artifact&gt; artifacts )
    {
<span class="pc bpc" id="L1419" title="1 of 2 branches missed.">        this.resolvedArtifacts = ( artifacts != null ) ? artifacts : Collections.&lt;Artifact&gt;emptySet();</span>
<span class="fc" id="L1420">        this.artifacts = null;</span>
<span class="fc" id="L1421">        this.artifactMap = null;</span>
<span class="fc" id="L1422">    }</span>

    /**
     * Sets the scope filter to select the artifacts being exposed to the currently executed mojo.
     * &lt;strong&gt;Warning:&lt;/strong&gt; This is an internal utility method that is only public for technical reasons, it is not
     * part of the public API. In particular, this method can be changed or deleted without prior notice and must not be
     * used by plugins.
     *
     * @param artifactFilter The artifact filter, may be {@code null} to exclude all artifacts.
     */
    public void setArtifactFilter( ArtifactFilter artifactFilter )
    {
<span class="fc" id="L1434">        this.artifactFilter = artifactFilter;</span>
<span class="fc" id="L1435">        this.artifacts = null;</span>
<span class="fc" id="L1436">        this.artifactMap = null;</span>
<span class="fc" id="L1437">    }</span>

    /**
     * &lt;strong&gt;Warning:&lt;/strong&gt; This is an internal utility method that is only public for technical reasons, it is not
     * part of the public API. In particular, this method can be changed or deleted without prior notice and must not be
     * used by plugins.
     *
     * @param phase The phase to check for, must not be {@code null}.
     * @return {@code true} if the phase has been seen.
     */
    public boolean hasLifecyclePhase( String phase )
    {
<span class="fc" id="L1449">        return lifecyclePhases.contains( phase );</span>
    }

    /**
     * &lt;strong&gt;Warning:&lt;/strong&gt; This is an internal utility method that is only public for technical reasons, it is not
     * part of the public API. In particular, this method can be changed or deleted without prior notice and must not be
     * used by plugins.
     *
     * @param lifecyclePhase The lifecycle phase to add, must not be {@code null}.
     */
    public void addLifecyclePhase( String lifecyclePhase )
    {
<span class="fc" id="L1461">        lifecyclePhases.add( lifecyclePhase );</span>
<span class="fc" id="L1462">    }</span>

    // ----------------------------------------------------------------------------------------------------------------
    //
    //
    // D E P R E C A T E D
    //
    //
    // ----------------------------------------------------------------------------------------------------------------
    //
    // Everything below will be removed for Maven 4.0.0
    //
    // ----------------------------------------------------------------------------------------------------------------

    private ProjectBuildingRequest projectBuilderConfiguration;

    private Map&lt;String, String&gt; moduleAdjustments;

    @Deprecated // This appears only to be used in test code
    public String getModulePathAdjustment( MavenProject moduleProject )
        throws IOException
    {
        // FIXME: This is hacky. What if module directory doesn't match artifactid, and parent
        // is coming from the repository??
<span class="fc" id="L1486">        String module = moduleProject.getArtifactId();</span>

<span class="fc" id="L1488">        File moduleFile = moduleProject.getFile();</span>

<span class="pc bpc" id="L1490" title="1 of 2 branches missed.">        if ( moduleFile != null )</span>
        {
<span class="fc" id="L1492">            File moduleDir = moduleFile.getCanonicalFile().getParentFile();</span>

<span class="fc" id="L1494">            module = moduleDir.getName();</span>
        }

<span class="pc bpc" id="L1497" title="1 of 2 branches missed.">        if ( moduleAdjustments == null )</span>
        {
<span class="fc" id="L1499">            moduleAdjustments = new HashMap&lt;&gt;();</span>

<span class="fc" id="L1501">            List&lt;String&gt; modules = getModules();</span>
<span class="pc bpc" id="L1502" title="1 of 2 branches missed.">            if ( modules != null )</span>
            {
<span class="fc bfc" id="L1504" title="All 2 branches covered.">                for ( String modulePath : modules )</span>
                {
<span class="fc" id="L1506">                    String moduleName = modulePath;</span>

<span class="pc bpc" id="L1508" title="2 of 4 branches missed.">                    if ( moduleName.endsWith( &quot;/&quot; ) || moduleName.endsWith( &quot;\\&quot; ) )</span>
                    {
<span class="nc" id="L1510">                        moduleName = moduleName.substring( 0, moduleName.length() - 1 );</span>
                    }

<span class="fc" id="L1513">                    int lastSlash = moduleName.lastIndexOf( '/' );</span>

<span class="pc bpc" id="L1515" title="1 of 2 branches missed.">                    if ( lastSlash &lt; 0 )</span>
                    {
<span class="nc" id="L1517">                        lastSlash = moduleName.lastIndexOf( '\\' );</span>
                    }

<span class="fc" id="L1520">                    String adjustment = null;</span>

<span class="pc bpc" id="L1522" title="1 of 2 branches missed.">                    if ( lastSlash &gt; -1 )</span>
                    {
<span class="fc" id="L1524">                        moduleName = moduleName.substring( lastSlash + 1 );</span>
<span class="fc" id="L1525">                        adjustment = modulePath.substring( 0, lastSlash );</span>
                    }

<span class="fc" id="L1528">                    moduleAdjustments.put( moduleName, adjustment );</span>
<span class="fc" id="L1529">                }</span>
            }
        }

<span class="fc" id="L1533">        return moduleAdjustments.get( module );</span>
    }

    @Deprecated
    public Set&lt;Artifact&gt; createArtifacts( ArtifactFactory artifactFactory, String inheritedScope,
                                          ArtifactFilter filter )
        throws InvalidDependencyVersionException
    {
<span class="nc" id="L1541">        return MavenMetadataSource.createArtifacts( artifactFactory, getDependencies(), inheritedScope, filter, this );</span>
    }

    @Deprecated
    protected void setScriptSourceRoots( List&lt;String&gt; scriptSourceRoots )
    {
<span class="fc" id="L1547">        this.scriptSourceRoots = scriptSourceRoots;</span>
<span class="fc" id="L1548">    }</span>

    @Deprecated
    public void addScriptSourceRoot( String path )
    {
<span class="pc bpc" id="L1553" title="1 of 2 branches missed.">        if ( path != null )</span>
        {
<span class="fc" id="L1555">            path = path.trim();</span>
<span class="pc bpc" id="L1556" title="1 of 2 branches missed.">            if ( path.length() != 0 )</span>
            {
<span class="pc bpc" id="L1558" title="1 of 2 branches missed.">                if ( !getScriptSourceRoots().contains( path ) )</span>
                {
<span class="fc" id="L1560">                    getScriptSourceRoots().add( path );</span>
                }
            }
        }
<span class="fc" id="L1564">    }</span>

    @Deprecated
    public List&lt;String&gt; getScriptSourceRoots()
    {
<span class="fc" id="L1569">        return scriptSourceRoots;</span>
    }

    @Deprecated
    public List&lt;Artifact&gt; getCompileArtifacts()
    {
<span class="fc" id="L1575">        List&lt;Artifact&gt; list = new ArrayList&lt;&gt;( getArtifacts().size() );</span>

<span class="fc bfc" id="L1577" title="All 2 branches covered.">        for ( Artifact a : getArtifacts() )</span>
        {
            // TODO classpath check doesn't belong here - that's the other method
<span class="pc bpc" id="L1580" title="1 of 2 branches missed.">            if ( a.getArtifactHandler().isAddedToClasspath() )</span>
            {
                // TODO let the scope handler deal with this
<span class="pc bpc" id="L1583" title="2 of 4 branches missed.">                if ( Artifact.SCOPE_COMPILE.equals( a.getScope() ) || Artifact.SCOPE_PROVIDED.equals( a.getScope() )</span>
<span class="pc bpc" id="L1584" title="1 of 2 branches missed.">                    || Artifact.SCOPE_SYSTEM.equals( a.getScope() ) )</span>
                {
<span class="fc" id="L1586">                    list.add( a );</span>
                }
            }
<span class="fc" id="L1589">        }</span>
<span class="fc" id="L1590">        return list;</span>
    }

    @Deprecated
    public List&lt;Dependency&gt; getCompileDependencies()
    {
<span class="nc" id="L1596">        Set&lt;Artifact&gt; artifacts = getArtifacts();</span>

<span class="nc bnc" id="L1598" title="All 4 branches missed.">        if ( ( artifacts == null ) || artifacts.isEmpty() )</span>
        {
<span class="nc" id="L1600">            return Collections.emptyList();</span>
        }

<span class="nc" id="L1603">        List&lt;Dependency&gt; list = new ArrayList&lt;&gt;( artifacts.size() );</span>

<span class="nc bnc" id="L1605" title="All 2 branches missed.">        for ( Artifact a : getArtifacts() )</span>
        {
            // TODO let the scope handler deal with this
<span class="nc bnc" id="L1608" title="All 4 branches missed.">            if ( Artifact.SCOPE_COMPILE.equals( a.getScope() ) || Artifact.SCOPE_PROVIDED.equals( a.getScope() )</span>
<span class="nc bnc" id="L1609" title="All 2 branches missed.">                     || Artifact.SCOPE_SYSTEM.equals( a.getScope() ) )</span>
            {
<span class="nc" id="L1611">                Dependency dependency = new Dependency();</span>

<span class="nc" id="L1613">                dependency.setArtifactId( a.getArtifactId() );</span>
<span class="nc" id="L1614">                dependency.setGroupId( a.getGroupId() );</span>
<span class="nc" id="L1615">                dependency.setVersion( a.getVersion() );</span>
<span class="nc" id="L1616">                dependency.setScope( a.getScope() );</span>
<span class="nc" id="L1617">                dependency.setType( a.getType() );</span>
<span class="nc" id="L1618">                dependency.setClassifier( a.getClassifier() );</span>

<span class="nc" id="L1620">                list.add( dependency );</span>
            }
<span class="nc" id="L1622">        }</span>
<span class="nc" id="L1623">        return Collections.unmodifiableList( list );</span>
    }

    @Deprecated
    public List&lt;Artifact&gt; getTestArtifacts()
    {
<span class="nc" id="L1629">        List&lt;Artifact&gt; list = new ArrayList&lt;&gt;( getArtifacts().size() );</span>

<span class="nc bnc" id="L1631" title="All 2 branches missed.">        for ( Artifact a : getArtifacts() )</span>
        {
            // TODO classpath check doesn't belong here - that's the other method
<span class="nc bnc" id="L1634" title="All 2 branches missed.">            if ( a.getArtifactHandler().isAddedToClasspath() )</span>
            {
<span class="nc" id="L1636">                list.add( a );</span>
            }
<span class="nc" id="L1638">        }</span>
<span class="nc" id="L1639">        return list;</span>
    }

    @Deprecated
    public List&lt;Dependency&gt; getTestDependencies()
    {
<span class="nc" id="L1645">        Set&lt;Artifact&gt; artifacts = getArtifacts();</span>

<span class="nc bnc" id="L1647" title="All 4 branches missed.">        if ( ( artifacts == null ) || artifacts.isEmpty() )</span>
        {
<span class="nc" id="L1649">            return Collections.emptyList();</span>
        }

<span class="nc" id="L1652">        List&lt;Dependency&gt; list = new ArrayList&lt;&gt;( artifacts.size() );</span>

<span class="nc bnc" id="L1654" title="All 2 branches missed.">        for ( Artifact a : getArtifacts() )</span>
        {
<span class="nc" id="L1656">            Dependency dependency = new Dependency();</span>

<span class="nc" id="L1658">            dependency.setArtifactId( a.getArtifactId() );</span>
<span class="nc" id="L1659">            dependency.setGroupId( a.getGroupId() );</span>
<span class="nc" id="L1660">            dependency.setVersion( a.getVersion() );</span>
<span class="nc" id="L1661">            dependency.setScope( a.getScope() );</span>
<span class="nc" id="L1662">            dependency.setType( a.getType() );</span>
<span class="nc" id="L1663">            dependency.setClassifier( a.getClassifier() );</span>

<span class="nc" id="L1665">            list.add( dependency );</span>
<span class="nc" id="L1666">        }</span>
<span class="nc" id="L1667">        return Collections.unmodifiableList( list );</span>
    }

    @Deprecated // used by the Maven ITs
    public List&lt;Dependency&gt; getRuntimeDependencies()
    {
<span class="nc" id="L1673">        Set&lt;Artifact&gt; artifacts = getArtifacts();</span>

<span class="nc bnc" id="L1675" title="All 4 branches missed.">        if ( ( artifacts == null ) || artifacts.isEmpty() )</span>
        {
<span class="nc" id="L1677">            return Collections.emptyList();</span>
        }

<span class="nc" id="L1680">        List&lt;Dependency&gt; list = new ArrayList&lt;&gt;( artifacts.size() );</span>

<span class="nc bnc" id="L1682" title="All 2 branches missed.">        for ( Artifact a : getArtifacts() )</span>
        {
            // TODO let the scope handler deal with this
<span class="nc bnc" id="L1685" title="All 4 branches missed.">            if ( Artifact.SCOPE_COMPILE.equals( a.getScope() ) || Artifact.SCOPE_RUNTIME.equals( a.getScope() ) )</span>
            {
<span class="nc" id="L1687">                Dependency dependency = new Dependency();</span>

<span class="nc" id="L1689">                dependency.setArtifactId( a.getArtifactId() );</span>
<span class="nc" id="L1690">                dependency.setGroupId( a.getGroupId() );</span>
<span class="nc" id="L1691">                dependency.setVersion( a.getVersion() );</span>
<span class="nc" id="L1692">                dependency.setScope( a.getScope() );</span>
<span class="nc" id="L1693">                dependency.setType( a.getType() );</span>
<span class="nc" id="L1694">                dependency.setClassifier( a.getClassifier() );</span>

<span class="nc" id="L1696">                list.add( dependency );</span>
            }
<span class="nc" id="L1698">        }</span>
<span class="nc" id="L1699">        return Collections.unmodifiableList( list );</span>
    }

    @Deprecated
    public List&lt;Artifact&gt; getRuntimeArtifacts()
    {
<span class="nc" id="L1705">        List&lt;Artifact&gt; list = new ArrayList&lt;&gt;( getArtifacts().size() );</span>

<span class="nc bnc" id="L1707" title="All 2 branches missed.">        for ( Artifact a : getArtifacts()  )</span>
        {
            // TODO classpath check doesn't belong here - that's the other method
<span class="nc bnc" id="L1710" title="All 2 branches missed.">            if ( a.getArtifactHandler().isAddedToClasspath()</span>
            // TODO let the scope handler deal with this
<span class="nc bnc" id="L1712" title="All 4 branches missed.">                &amp;&amp; ( Artifact.SCOPE_COMPILE.equals( a.getScope() ) || Artifact.SCOPE_RUNTIME.equals( a.getScope() ) ) )</span>
            {
<span class="nc" id="L1714">                list.add( a );</span>
            }
<span class="nc" id="L1716">        }</span>
<span class="nc" id="L1717">        return list;</span>
    }

    @Deprecated
    public List&lt;String&gt; getSystemClasspathElements()
        throws DependencyResolutionRequiredException
    {
<span class="fc" id="L1724">        List&lt;String&gt; list = new ArrayList&lt;&gt;( getArtifacts().size() );</span>

<span class="fc" id="L1726">        String d = getBuild().getOutputDirectory();</span>
<span class="pc bpc" id="L1727" title="1 of 2 branches missed.">        if ( d != null )</span>
        {
<span class="nc" id="L1729">            list.add( d );</span>
        }

<span class="pc bpc" id="L1732" title="1 of 2 branches missed.">        for ( Artifact a : getArtifacts() )</span>
        {
<span class="nc bnc" id="L1734" title="All 2 branches missed.">            if ( a.getArtifactHandler().isAddedToClasspath() )</span>
            {
                // TODO let the scope handler deal with this
<span class="nc bnc" id="L1737" title="All 2 branches missed.">                if ( Artifact.SCOPE_SYSTEM.equals( a.getScope() ) )</span>
                {
<span class="nc" id="L1739">                    addArtifactPath( a, list );</span>
                }
            }
<span class="nc" id="L1742">        }</span>
<span class="fc" id="L1743">        return list;</span>
    }

    @Deprecated
    public List&lt;Artifact&gt; getSystemArtifacts()
    {
<span class="nc" id="L1749">        List&lt;Artifact&gt; list = new ArrayList&lt;&gt;( getArtifacts().size() );</span>

<span class="nc bnc" id="L1751" title="All 2 branches missed.">        for ( Artifact a : getArtifacts() )</span>
        {
            // TODO classpath check doesn't belong here - that's the other method
<span class="nc bnc" id="L1754" title="All 2 branches missed.">            if ( a.getArtifactHandler().isAddedToClasspath() )</span>
            {
                // TODO let the scope handler deal with this
<span class="nc bnc" id="L1757" title="All 2 branches missed.">                if ( Artifact.SCOPE_SYSTEM.equals( a.getScope() ) )</span>
                {
<span class="nc" id="L1759">                    list.add( a );</span>
                }
            }
<span class="nc" id="L1762">        }</span>
<span class="nc" id="L1763">        return list;</span>
    }

    @Deprecated
    public List&lt;Dependency&gt; getSystemDependencies()
    {
<span class="nc" id="L1769">        Set&lt;Artifact&gt; artifacts = getArtifacts();</span>

<span class="nc bnc" id="L1771" title="All 4 branches missed.">        if ( ( artifacts == null ) || artifacts.isEmpty() )</span>
        {
<span class="nc" id="L1773">            return Collections.emptyList();</span>
        }

<span class="nc" id="L1776">        List&lt;Dependency&gt; list = new ArrayList&lt;&gt;( artifacts.size() );</span>

<span class="nc bnc" id="L1778" title="All 2 branches missed.">        for ( Artifact a : getArtifacts() )</span>
        {
            // TODO let the scope handler deal with this
<span class="nc bnc" id="L1781" title="All 2 branches missed.">            if ( Artifact.SCOPE_SYSTEM.equals( a.getScope() ) )</span>
            {
<span class="nc" id="L1783">                Dependency dependency = new Dependency();</span>

<span class="nc" id="L1785">                dependency.setArtifactId( a.getArtifactId() );</span>
<span class="nc" id="L1786">                dependency.setGroupId( a.getGroupId() );</span>
<span class="nc" id="L1787">                dependency.setVersion( a.getVersion() );</span>
<span class="nc" id="L1788">                dependency.setScope( a.getScope() );</span>
<span class="nc" id="L1789">                dependency.setType( a.getType() );</span>
<span class="nc" id="L1790">                dependency.setClassifier( a.getClassifier() );</span>

<span class="nc" id="L1792">                list.add( dependency );</span>
            }
<span class="nc" id="L1794">        }</span>
<span class="nc" id="L1795">        return Collections.unmodifiableList( list );</span>
    }

    @Deprecated
    public void setReporting( Reporting reporting )
    {
<span class="nc" id="L1801">        getModel().setReporting( reporting );</span>
<span class="nc" id="L1802">    }</span>

    @Deprecated
    public Reporting getReporting()
    {
<span class="nc" id="L1807">        return getModel().getReporting();</span>
    }

    @Deprecated
    public void setReportArtifacts( Set&lt;Artifact&gt; reportArtifacts )
    {
<span class="fc" id="L1813">        this.reportArtifacts = reportArtifacts;</span>

<span class="fc" id="L1815">        reportArtifactMap = null;</span>
<span class="fc" id="L1816">    }</span>

    @Deprecated
    public Set&lt;Artifact&gt; getReportArtifacts()
    {
<span class="fc" id="L1821">        return reportArtifacts;</span>
    }

    @Deprecated
    public Map&lt;String, Artifact&gt; getReportArtifactMap()
    {
<span class="nc bnc" id="L1827" title="All 2 branches missed.">        if ( reportArtifactMap == null )</span>
        {
<span class="nc" id="L1829">            reportArtifactMap = ArtifactUtils.artifactMapByVersionlessId( getReportArtifacts() );</span>
        }

<span class="nc" id="L1832">        return reportArtifactMap;</span>
    }

    @Deprecated
    public void setExtensionArtifacts( Set&lt;Artifact&gt; extensionArtifacts )
    {
<span class="fc" id="L1838">        this.extensionArtifacts = extensionArtifacts;</span>

<span class="fc" id="L1840">        extensionArtifactMap = null;</span>
<span class="fc" id="L1841">    }</span>

    @Deprecated
    public Set&lt;Artifact&gt; getExtensionArtifacts()
    {
<span class="fc" id="L1846">        return extensionArtifacts;</span>
    }

    @Deprecated
    public Map&lt;String, Artifact&gt; getExtensionArtifactMap()
    {
<span class="nc bnc" id="L1852" title="All 2 branches missed.">        if ( extensionArtifactMap == null )</span>
        {
<span class="nc" id="L1854">            extensionArtifactMap = ArtifactUtils.artifactMapByVersionlessId( getExtensionArtifacts() );</span>
        }

<span class="nc" id="L1857">        return extensionArtifactMap;</span>
    }

    @Deprecated
    public List&lt;ReportPlugin&gt; getReportPlugins()
    {
<span class="pc bpc" id="L1863" title="1 of 2 branches missed.">        if ( getModel().getReporting() == null )</span>
        {
<span class="nc" id="L1865">            return Collections.emptyList();</span>
        }
<span class="fc" id="L1867">        return Collections.unmodifiableList( getModel().getReporting().getPlugins() );</span>
    }

    @Deprecated
    public Xpp3Dom getReportConfiguration( String pluginGroupId, String pluginArtifactId, String reportSetId )
    {
<span class="nc" id="L1873">        Xpp3Dom dom = null;</span>

        // ----------------------------------------------------------------------
        // I would like to be able to lookup the Mojo object using a key but
        // we have a limitation in modello that will be remedied shortly. So
        // for now I have to iterate through and see what we have.
        // ----------------------------------------------------------------------

<span class="nc bnc" id="L1881" title="All 2 branches missed.">        if ( getReportPlugins() != null )</span>
        {
<span class="nc bnc" id="L1883" title="All 2 branches missed.">            for ( ReportPlugin plugin : getReportPlugins() )</span>
            {
<span class="nc bnc" id="L1885" title="All 4 branches missed.">                if ( pluginGroupId.equals( plugin.getGroupId() ) &amp;&amp; pluginArtifactId.equals( plugin.getArtifactId() ) )</span>
                {
<span class="nc" id="L1887">                    dom = (Xpp3Dom) plugin.getConfiguration();</span>

<span class="nc bnc" id="L1889" title="All 2 branches missed.">                    if ( reportSetId != null )</span>
                    {
<span class="nc" id="L1891">                        ReportSet reportSet = plugin.getReportSetsAsMap().get( reportSetId );</span>
<span class="nc bnc" id="L1892" title="All 2 branches missed.">                        if ( reportSet != null )</span>
                        {
<span class="nc" id="L1894">                            Xpp3Dom executionConfiguration = (Xpp3Dom) reportSet.getConfiguration();</span>
<span class="nc bnc" id="L1895" title="All 2 branches missed.">                            if ( executionConfiguration != null )</span>
                            {
<span class="nc" id="L1897">                                Xpp3Dom newDom = new Xpp3Dom( executionConfiguration );</span>
<span class="nc" id="L1898">                                dom = Xpp3Dom.mergeXpp3Dom( newDom, dom );</span>
                            }
                        }
<span class="nc" id="L1901">                    }</span>
                    break;
                }
<span class="nc" id="L1904">            }</span>
        }

<span class="nc bnc" id="L1907" title="All 2 branches missed.">        if ( dom != null )</span>
        {
            // make a copy so the original in the POM doesn't get messed with
<span class="nc" id="L1910">            dom = new Xpp3Dom( dom );</span>
        }

<span class="nc" id="L1913">        return dom;</span>
    }

    /**
     * @deprecated Use MavenProjectHelper.attachArtifact(..) instead.
     */
    @Deprecated
    public void attachArtifact( String type, String classifier, File file )
    {
<span class="nc" id="L1922">    }</span>

    /**
     * @deprecated Use {@link org.apache.maven.model.io.ModelWriter}.
     */
    @Deprecated
    public void writeModel( Writer writer )
        throws IOException
    {
<span class="nc" id="L1931">        MavenXpp3Writer pomWriter = new MavenXpp3Writer();</span>
<span class="nc" id="L1932">        pomWriter.write( writer, getModel() );</span>
<span class="nc" id="L1933">    }</span>

    /**
     * @deprecated Use {@link org.apache.maven.model.io.ModelWriter}.
     */
    @Deprecated
    public void writeOriginalModel( Writer writer )
        throws IOException
    {
<span class="nc" id="L1942">        MavenXpp3Writer pomWriter = new MavenXpp3Writer();</span>
<span class="nc" id="L1943">        pomWriter.write( writer, getOriginalModel() );</span>
<span class="nc" id="L1944">    }</span>

    @Deprecated
    public Artifact replaceWithActiveArtifact( Artifact pluginArtifact )
    {
<span class="nc" id="L1949">        return pluginArtifact;</span>
    }

    /**
     * Gets the project building request from which this project instance was created. &lt;strong&gt;Warning:&lt;/strong&gt; This is
     * an utility method that is meant to assist integrators of Maven, it must not be used by Maven plugins.
     *
     * @return The project building request or {@code null}.
     * @since 2.1
     */
    @Deprecated
    public ProjectBuildingRequest getProjectBuildingRequest()
    {
<span class="nc" id="L1962">        return projectBuilderConfiguration;</span>
    }

    /**
     * Sets the project building request from which this project instance was created. &lt;strong&gt;Warning:&lt;/strong&gt; This is
     * an utility method that is meant to assist integrators of Maven, it must not be used by Maven plugins.
     *
     * @param projectBuildingRequest The project building request, may be {@code null}.
     * @since 2.1
     */
    // used by maven-dependency-tree
    @Deprecated
    public void setProjectBuildingRequest( ProjectBuildingRequest projectBuildingRequest )
    {
<span class="fc" id="L1976">        this.projectBuilderConfiguration = projectBuildingRequest;</span>
<span class="fc" id="L1977">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>