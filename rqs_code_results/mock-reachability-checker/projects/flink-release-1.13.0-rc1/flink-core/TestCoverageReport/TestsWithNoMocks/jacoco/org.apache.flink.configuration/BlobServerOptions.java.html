<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>BlobServerOptions.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Flink : Core</a> &gt; <a href="index.source.html" class="el_package">org.apache.flink.configuration</a> &gt; <span class="el_source">BlobServerOptions.java</span></div><h1>BlobServerOptions.java</h1><pre class="source lang-java linenums">/*
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * &quot;License&quot;); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package org.apache.flink.configuration;

import org.apache.flink.annotation.PublicEvolving;
import org.apache.flink.configuration.description.Description;

import static org.apache.flink.configuration.ConfigOptions.key;
import static org.apache.flink.configuration.description.TextElement.code;

/** Configuration options for the BlobServer and BlobCache. */
@PublicEvolving
<span class="nc" id="L29">public class BlobServerOptions {</span>

    /** The config parameter defining the storage directory to be used by the blob server. */
<span class="fc" id="L32">    public static final ConfigOption&lt;String&gt; STORAGE_DIRECTORY =</span>
<span class="fc" id="L33">            key(&quot;blob.storage.directory&quot;)</span>
<span class="fc" id="L34">                    .noDefaultValue()</span>
<span class="fc" id="L35">                    .withDescription(</span>
                            &quot;The config parameter defining the storage directory to be used by the blob server.&quot;);

    /** The config parameter defining number of retires for failed BLOB fetches. */
<span class="fc" id="L39">    public static final ConfigOption&lt;Integer&gt; FETCH_RETRIES =</span>
<span class="fc" id="L40">            key(&quot;blob.fetch.retries&quot;)</span>
<span class="fc" id="L41">                    .defaultValue(5)</span>
<span class="fc" id="L42">                    .withDescription(</span>
                            &quot;The config parameter defining number of retires for failed BLOB fetches.&quot;);

    /**
     * The config parameter defining the maximum number of concurrent BLOB fetches that the
     * JobManager serves.
     */
<span class="fc" id="L49">    public static final ConfigOption&lt;Integer&gt; FETCH_CONCURRENT =</span>
<span class="fc" id="L50">            key(&quot;blob.fetch.num-concurrent&quot;)</span>
<span class="fc" id="L51">                    .defaultValue(50)</span>
<span class="fc" id="L52">                    .withDescription(</span>
                            &quot;The config parameter defining the maximum number of concurrent BLOB fetches that the JobManager serves.&quot;);

    /** The config parameter defining the backlog of BLOB fetches on the JobManager. */
<span class="fc" id="L56">    public static final ConfigOption&lt;Integer&gt; FETCH_BACKLOG =</span>
<span class="fc" id="L57">            key(&quot;blob.fetch.backlog&quot;)</span>
<span class="fc" id="L58">                    .defaultValue(1000)</span>
<span class="fc" id="L59">                    .withDescription(</span>
<span class="fc" id="L60">                            Description.builder()</span>
<span class="fc" id="L61">                                    .text(</span>
                                            &quot;The config parameter defining the desired backlog of BLOB fetches on the JobManager.&quot;
                                                    + &quot;Note that the operating system usually enforces an upper limit on the backlog size based on the %s setting.&quot;,
<span class="fc" id="L64">                                            code(&quot;SOMAXCONN&quot;))</span>
<span class="fc" id="L65">                                    .build());</span>

    /**
     * The config parameter defining the server port of the blob service. The port can either be a
     * port, such as &quot;9123&quot;, a range of ports: &quot;50100-50200&quot; or a list of ranges and or points:
     * &quot;50100-50200,50300-50400,51234&quot;
     *
     * &lt;p&gt;Setting the port to 0 will let the OS choose an available port.
     */
<span class="fc" id="L74">    public static final ConfigOption&lt;String&gt; PORT =</span>
<span class="fc" id="L75">            key(&quot;blob.server.port&quot;)</span>
<span class="fc" id="L76">                    .defaultValue(&quot;0&quot;)</span>
<span class="fc" id="L77">                    .withDescription(</span>
                            &quot;The config parameter defining the server port of the blob service.&quot;);

    /** Flag to override ssl support for the blob service transport. */
<span class="fc" id="L81">    public static final ConfigOption&lt;Boolean&gt; SSL_ENABLED =</span>
<span class="fc" id="L82">            key(&quot;blob.service.ssl.enabled&quot;)</span>
<span class="fc" id="L83">                    .defaultValue(true)</span>
<span class="fc" id="L84">                    .withDescription(</span>
                            &quot;Flag to override ssl support for the blob service transport.&quot;);

    /**
     * Cleanup interval of the blob caches at the task managers (in seconds).
     *
     * &lt;p&gt;Whenever a job is not referenced at the cache anymore, we set a TTL and let the periodic
     * cleanup task (executed every CLEANUP_INTERVAL seconds) remove its blob files after this TTL
     * has passed. This means that a blob will be retained at most &lt;tt&gt;2 * CLEANUP_INTERVAL&lt;/tt&gt;
     * seconds after not being referenced anymore. Therefore, a recovery still has the chance to use
     * existing files rather than to download them again.
     */
<span class="fc" id="L96">    public static final ConfigOption&lt;Long&gt; CLEANUP_INTERVAL =</span>
<span class="fc" id="L97">            key(&quot;blob.service.cleanup.interval&quot;)</span>
<span class="fc" id="L98">                    .defaultValue(3_600L) // once per hour</span>
<span class="fc" id="L99">                    .withDeprecatedKeys(&quot;library-cache-manager.cleanup.interval&quot;)</span>
<span class="fc" id="L100">                    .withDescription(</span>
                            &quot;Cleanup interval of the blob caches at the task managers (in seconds).&quot;);

    /** The minimum size for messages to be offloaded to the BlobServer. */
<span class="fc" id="L104">    public static final ConfigOption&lt;Integer&gt; OFFLOAD_MINSIZE =</span>
<span class="fc" id="L105">            key(&quot;blob.offload.minsize&quot;)</span>
<span class="fc" id="L106">                    .defaultValue(1_024 * 1_024) // 1MiB by default</span>
<span class="fc" id="L107">                    .withDescription(</span>
                            &quot;The minimum size for messages to be offloaded to the BlobServer.&quot;);

    /** The socket timeout in milliseconds for the blob client. */
<span class="fc" id="L111">    public static final ConfigOption&lt;Integer&gt; SO_TIMEOUT =</span>
<span class="fc" id="L112">            key(&quot;blob.client.socket.timeout&quot;)</span>
<span class="fc" id="L113">                    .defaultValue(300_000)</span>
<span class="fc" id="L114">                    .withDescription(&quot;The socket timeout in milliseconds for the blob client.&quot;);</span>

    /** The connection timeout in milliseconds for the blob client. */
<span class="fc" id="L117">    public static final ConfigOption&lt;Integer&gt; CONNECT_TIMEOUT =</span>
<span class="fc" id="L118">            key(&quot;blob.client.connect.timeout&quot;)</span>
<span class="fc" id="L119">                    .defaultValue(0)</span>
<span class="fc" id="L120">                    .withDescription(&quot;The connection timeout in milliseconds for the blob client.&quot;);</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>