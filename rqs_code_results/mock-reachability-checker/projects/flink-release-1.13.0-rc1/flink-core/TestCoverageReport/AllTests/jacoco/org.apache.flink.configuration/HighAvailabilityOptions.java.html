<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>HighAvailabilityOptions.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Flink : Core</a> &gt; <a href="index.source.html" class="el_package">org.apache.flink.configuration</a> &gt; <span class="el_source">HighAvailabilityOptions.java</span></div><h1>HighAvailabilityOptions.java</h1><pre class="source lang-java linenums">/*
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * &quot;License&quot;); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package org.apache.flink.configuration;

import org.apache.flink.annotation.PublicEvolving;
import org.apache.flink.annotation.docs.Documentation;
import org.apache.flink.configuration.description.Description;

import static org.apache.flink.configuration.ConfigOptions.key;

/** The set of configuration options relating to high-availability settings. */
public class HighAvailabilityOptions {

    // ------------------------------------------------------------------------
    //  Required High Availability Options
    // ------------------------------------------------------------------------

    /**
     * Defines high-availability mode used for the cluster execution. A value of &quot;NONE&quot; signals no
     * highly available setup. To enable high-availability, set this mode to &quot;ZOOKEEPER&quot;. Can also
     * be set to FQN of HighAvailability factory class.
     */
    @Documentation.Section(Documentation.Sections.COMMON_HIGH_AVAILABILITY)
<span class="nc" id="L40">    public static final ConfigOption&lt;String&gt; HA_MODE =</span>
<span class="nc" id="L41">            key(&quot;high-availability&quot;)</span>
<span class="nc" id="L42">                    .defaultValue(&quot;NONE&quot;)</span>
<span class="nc" id="L43">                    .withDeprecatedKeys(&quot;recovery.mode&quot;)</span>
<span class="nc" id="L44">                    .withDescription(</span>
                            &quot;Defines high-availability mode used for the cluster execution.&quot;
                                    + &quot; To enable high-availability, set this mode to \&quot;ZOOKEEPER\&quot; or specify FQN of factory class.&quot;);

    /**
     * The ID of the Flink cluster, used to separate multiple Flink clusters Needs to be set for
     * standalone clusters, is automatically inferred in YARN and Mesos.
     */
    @Documentation.Section(Documentation.Sections.COMMON_HIGH_AVAILABILITY)
<span class="nc" id="L53">    public static final ConfigOption&lt;String&gt; HA_CLUSTER_ID =</span>
<span class="nc" id="L54">            key(&quot;high-availability.cluster-id&quot;)</span>
<span class="nc" id="L55">                    .defaultValue(&quot;/default&quot;)</span>
<span class="nc" id="L56">                    .withDeprecatedKeys(</span>
                            &quot;high-availability.zookeeper.path.namespace&quot;,
                            &quot;recovery.zookeeper.path.namespace&quot;)
<span class="nc" id="L59">                    .withDescription(</span>
                            &quot;The ID of the Flink cluster, used to separate multiple Flink clusters from each other.&quot;
                                    + &quot; Needs to be set for standalone clusters but is automatically inferred in YARN and Mesos.&quot;);

    /** File system path (URI) where Flink persists metadata in high-availability setups. */
    @Documentation.Section(Documentation.Sections.COMMON_HIGH_AVAILABILITY)
<span class="nc" id="L65">    public static final ConfigOption&lt;String&gt; HA_STORAGE_PATH =</span>
<span class="nc" id="L66">            key(&quot;high-availability.storageDir&quot;)</span>
<span class="nc" id="L67">                    .noDefaultValue()</span>
<span class="nc" id="L68">                    .withDeprecatedKeys(</span>
                            &quot;high-availability.zookeeper.storageDir&quot;,
                            &quot;recovery.zookeeper.storageDir&quot;)
<span class="nc" id="L71">                    .withDescription(</span>
                            &quot;File system path (URI) where Flink persists metadata in high-availability setups.&quot;);

    // ------------------------------------------------------------------------
    //  Recovery Options
    // ------------------------------------------------------------------------

    /** Optional port (range) used by the job manager in high-availability mode. */
    @Documentation.Section(Documentation.Sections.EXPERT_HIGH_AVAILABILITY)
<span class="nc" id="L80">    public static final ConfigOption&lt;String&gt; HA_JOB_MANAGER_PORT_RANGE =</span>
<span class="nc" id="L81">            key(&quot;high-availability.jobmanager.port&quot;)</span>
<span class="nc" id="L82">                    .stringType()</span>
<span class="nc" id="L83">                    .defaultValue(&quot;0&quot;)</span>
<span class="nc" id="L84">                    .withDeprecatedKeys(&quot;recovery.jobmanager.port&quot;)</span>
<span class="nc" id="L85">                    .withDescription(</span>
                            &quot;The port (range) used by the Flink Master for its RPC connections in highly-available setups. &quot;
                                    + &quot;In highly-available setups, this value is used instead of '&quot;
<span class="nc" id="L88">                                    + JobManagerOptions.PORT.key()</span>
                                    + &quot;'.&quot;
                                    + &quot;A value of '0' means that a random free port is chosen. TaskManagers discover this port through &quot;
                                    + &quot;the high-availability services (leader election), so a random port or a port range works &quot;
                                    + &quot;without requiring any additional means of service discovery.&quot;);

    // ------------------------------------------------------------------------
    //  ZooKeeper Options
    // ------------------------------------------------------------------------

    /**
     * The ZooKeeper quorum to use, when running Flink in a high-availability mode with ZooKeeper.
     */
    @Documentation.Section(Documentation.Sections.COMMON_HIGH_AVAILABILITY_ZOOKEEPER)
<span class="nc" id="L102">    public static final ConfigOption&lt;String&gt; HA_ZOOKEEPER_QUORUM =</span>
<span class="nc" id="L103">            key(&quot;high-availability.zookeeper.quorum&quot;)</span>
<span class="nc" id="L104">                    .noDefaultValue()</span>
<span class="nc" id="L105">                    .withDeprecatedKeys(&quot;recovery.zookeeper.quorum&quot;)</span>
<span class="nc" id="L106">                    .withDescription(</span>
                            &quot;The ZooKeeper quorum to use, when running Flink in a high-availability mode with ZooKeeper.&quot;);

    /** The root path under which Flink stores its entries in ZooKeeper. */
    @Documentation.Section(Documentation.Sections.COMMON_HIGH_AVAILABILITY_ZOOKEEPER)
<span class="nc" id="L111">    public static final ConfigOption&lt;String&gt; HA_ZOOKEEPER_ROOT =</span>
<span class="nc" id="L112">            key(&quot;high-availability.zookeeper.path.root&quot;)</span>
<span class="nc" id="L113">                    .defaultValue(&quot;/flink&quot;)</span>
<span class="nc" id="L114">                    .withDeprecatedKeys(&quot;recovery.zookeeper.path.root&quot;)</span>
<span class="nc" id="L115">                    .withDescription(</span>
                            &quot;The root path under which Flink stores its entries in ZooKeeper.&quot;);

    @Documentation.Section(Documentation.Sections.EXPERT_ZOOKEEPER_HIGH_AVAILABILITY)
<span class="nc" id="L119">    public static final ConfigOption&lt;String&gt; HA_ZOOKEEPER_LATCH_PATH =</span>
<span class="nc" id="L120">            key(&quot;high-availability.zookeeper.path.latch&quot;)</span>
<span class="nc" id="L121">                    .defaultValue(&quot;/leaderlatch&quot;)</span>
<span class="nc" id="L122">                    .withDeprecatedKeys(&quot;recovery.zookeeper.path.latch&quot;)</span>
<span class="nc" id="L123">                    .withDescription(</span>
                            &quot;Defines the znode of the leader latch which is used to elect the leader.&quot;);

    /** ZooKeeper root path (ZNode) for job graphs. */
    @Documentation.Section(Documentation.Sections.EXPERT_ZOOKEEPER_HIGH_AVAILABILITY)
<span class="nc" id="L128">    public static final ConfigOption&lt;String&gt; HA_ZOOKEEPER_JOBGRAPHS_PATH =</span>
<span class="nc" id="L129">            key(&quot;high-availability.zookeeper.path.jobgraphs&quot;)</span>
<span class="nc" id="L130">                    .defaultValue(&quot;/jobgraphs&quot;)</span>
<span class="nc" id="L131">                    .withDeprecatedKeys(&quot;recovery.zookeeper.path.jobgraphs&quot;)</span>
<span class="nc" id="L132">                    .withDescription(&quot;ZooKeeper root path (ZNode) for job graphs&quot;);</span>

    @Documentation.Section(Documentation.Sections.EXPERT_ZOOKEEPER_HIGH_AVAILABILITY)
<span class="nc" id="L135">    public static final ConfigOption&lt;String&gt; HA_ZOOKEEPER_LEADER_PATH =</span>
<span class="nc" id="L136">            key(&quot;high-availability.zookeeper.path.leader&quot;)</span>
<span class="nc" id="L137">                    .defaultValue(&quot;/leader&quot;)</span>
<span class="nc" id="L138">                    .withDeprecatedKeys(&quot;recovery.zookeeper.path.leader&quot;)</span>
<span class="nc" id="L139">                    .withDescription(</span>
                            &quot;Defines the znode of the leader which contains the URL to the leader and the current&quot;
                                    + &quot; leader session ID.&quot;);

    /** ZooKeeper root path (ZNode) for completed checkpoints. */
    @Documentation.Section(Documentation.Sections.EXPERT_ZOOKEEPER_HIGH_AVAILABILITY)
<span class="nc" id="L145">    public static final ConfigOption&lt;String&gt; HA_ZOOKEEPER_CHECKPOINTS_PATH =</span>
<span class="nc" id="L146">            key(&quot;high-availability.zookeeper.path.checkpoints&quot;)</span>
<span class="nc" id="L147">                    .defaultValue(&quot;/checkpoints&quot;)</span>
<span class="nc" id="L148">                    .withDeprecatedKeys(&quot;recovery.zookeeper.path.checkpoints&quot;)</span>
<span class="nc" id="L149">                    .withDescription(&quot;ZooKeeper root path (ZNode) for completed checkpoints.&quot;);</span>

    /** ZooKeeper root path (ZNode) for checkpoint counters. */
    @Documentation.Section(Documentation.Sections.EXPERT_ZOOKEEPER_HIGH_AVAILABILITY)
<span class="nc" id="L153">    public static final ConfigOption&lt;String&gt; HA_ZOOKEEPER_CHECKPOINT_COUNTER_PATH =</span>
<span class="nc" id="L154">            key(&quot;high-availability.zookeeper.path.checkpoint-counter&quot;)</span>
<span class="nc" id="L155">                    .defaultValue(&quot;/checkpoint-counter&quot;)</span>
<span class="nc" id="L156">                    .withDeprecatedKeys(&quot;recovery.zookeeper.path.checkpoint-counter&quot;)</span>
<span class="nc" id="L157">                    .withDescription(&quot;ZooKeeper root path (ZNode) for checkpoint counters.&quot;);</span>

    /** ZooKeeper root path (ZNode) for Mesos workers. */
    @PublicEvolving
    @Documentation.Section(Documentation.Sections.EXPERT_ZOOKEEPER_HIGH_AVAILABILITY)
<span class="nc" id="L162">    public static final ConfigOption&lt;String&gt; HA_ZOOKEEPER_MESOS_WORKERS_PATH =</span>
<span class="nc" id="L163">            key(&quot;high-availability.zookeeper.path.mesos-workers&quot;)</span>
<span class="nc" id="L164">                    .defaultValue(&quot;/mesos-workers&quot;)</span>
<span class="nc" id="L165">                    .withDeprecatedKeys(&quot;recovery.zookeeper.path.mesos-workers&quot;)</span>
<span class="nc" id="L166">                    .withDescription(</span>
<span class="nc" id="L167">                            Description.builder()</span>
<span class="nc" id="L168">                                    .text(</span>
                                            &quot;The ZooKeeper root path for persisting the Mesos worker information.&quot;)
<span class="nc" id="L170">                                    .build());</span>

    // ------------------------------------------------------------------------
    //  ZooKeeper Client Settings
    // ------------------------------------------------------------------------

    @Documentation.Section(Documentation.Sections.EXPERT_ZOOKEEPER_HIGH_AVAILABILITY)
<span class="nc" id="L177">    public static final ConfigOption&lt;Integer&gt; ZOOKEEPER_SESSION_TIMEOUT =</span>
<span class="nc" id="L178">            key(&quot;high-availability.zookeeper.client.session-timeout&quot;)</span>
<span class="nc" id="L179">                    .defaultValue(60000)</span>
<span class="nc" id="L180">                    .withDeprecatedKeys(&quot;recovery.zookeeper.client.session-timeout&quot;)</span>
<span class="nc" id="L181">                    .withDescription(</span>
                            &quot;Defines the session timeout for the ZooKeeper session in ms.&quot;);

    @Documentation.Section(Documentation.Sections.EXPERT_ZOOKEEPER_HIGH_AVAILABILITY)
<span class="nc" id="L185">    public static final ConfigOption&lt;Integer&gt; ZOOKEEPER_CONNECTION_TIMEOUT =</span>
<span class="nc" id="L186">            key(&quot;high-availability.zookeeper.client.connection-timeout&quot;)</span>
<span class="nc" id="L187">                    .defaultValue(15000)</span>
<span class="nc" id="L188">                    .withDeprecatedKeys(&quot;recovery.zookeeper.client.connection-timeout&quot;)</span>
<span class="nc" id="L189">                    .withDescription(&quot;Defines the connection timeout for ZooKeeper in ms.&quot;);</span>

    @Documentation.Section(Documentation.Sections.EXPERT_ZOOKEEPER_HIGH_AVAILABILITY)
<span class="nc" id="L192">    public static final ConfigOption&lt;Integer&gt; ZOOKEEPER_RETRY_WAIT =</span>
<span class="nc" id="L193">            key(&quot;high-availability.zookeeper.client.retry-wait&quot;)</span>
<span class="nc" id="L194">                    .defaultValue(5000)</span>
<span class="nc" id="L195">                    .withDeprecatedKeys(&quot;recovery.zookeeper.client.retry-wait&quot;)</span>
<span class="nc" id="L196">                    .withDescription(&quot;Defines the pause between consecutive retries in ms.&quot;);</span>

    @Documentation.Section(Documentation.Sections.EXPERT_ZOOKEEPER_HIGH_AVAILABILITY)
<span class="nc" id="L199">    public static final ConfigOption&lt;Integer&gt; ZOOKEEPER_MAX_RETRY_ATTEMPTS =</span>
<span class="nc" id="L200">            key(&quot;high-availability.zookeeper.client.max-retry-attempts&quot;)</span>
<span class="nc" id="L201">                    .defaultValue(3)</span>
<span class="nc" id="L202">                    .withDeprecatedKeys(&quot;recovery.zookeeper.client.max-retry-attempts&quot;)</span>
<span class="nc" id="L203">                    .withDescription(</span>
                            &quot;Defines the number of connection retries before the client gives up.&quot;);

    @Documentation.Section(Documentation.Sections.EXPERT_ZOOKEEPER_HIGH_AVAILABILITY)
<span class="nc" id="L207">    public static final ConfigOption&lt;String&gt; ZOOKEEPER_RUNNING_JOB_REGISTRY_PATH =</span>
<span class="nc" id="L208">            key(&quot;high-availability.zookeeper.path.running-registry&quot;)</span>
<span class="nc" id="L209">                    .defaultValue(&quot;/running_job_registry/&quot;);</span>

    @Documentation.Section(Documentation.Sections.EXPERT_ZOOKEEPER_HIGH_AVAILABILITY)
<span class="nc" id="L212">    public static final ConfigOption&lt;String&gt; ZOOKEEPER_CLIENT_ACL =</span>
<span class="nc" id="L213">            key(&quot;high-availability.zookeeper.client.acl&quot;)</span>
<span class="nc" id="L214">                    .defaultValue(&quot;open&quot;)</span>
<span class="nc" id="L215">                    .withDescription(</span>
                            &quot;Defines the ACL (open|creator) to be configured on ZK node. The configuration value can be&quot;
                                    + &quot; set to “creator” if the ZooKeeper server configuration has the “authProvider” property mapped to use&quot;
                                    + &quot; SASLAuthenticationProvider and the cluster is configured to run in secure mode (Kerberos).&quot;);

    // ------------------------------------------------------------------------
    //  Deprecated options
    // ------------------------------------------------------------------------

    /**
     * The time before a JobManager after a fail over recovers the current jobs.
     *
     * @deprecated Don't use this option anymore. It has no effect on Flink.
     */
    @Deprecated
<span class="nc" id="L230">    public static final ConfigOption&lt;String&gt; HA_JOB_DELAY =</span>
<span class="nc" id="L231">            key(&quot;high-availability.job.delay&quot;)</span>
<span class="nc" id="L232">                    .noDefaultValue()</span>
<span class="nc" id="L233">                    .withDeprecatedKeys(&quot;recovery.job.delay&quot;)</span>
<span class="nc" id="L234">                    .withDescription(</span>
                            &quot;The time before a JobManager after a fail over recovers the current jobs.&quot;);

    // ------------------------------------------------------------------------

    /** Not intended to be instantiated. */
    private HighAvailabilityOptions() {}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>