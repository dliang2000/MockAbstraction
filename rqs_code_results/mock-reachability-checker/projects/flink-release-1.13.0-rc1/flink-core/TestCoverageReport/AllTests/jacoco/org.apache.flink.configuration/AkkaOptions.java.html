<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>AkkaOptions.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Flink : Core</a> &gt; <a href="index.source.html" class="el_package">org.apache.flink.configuration</a> &gt; <span class="el_source">AkkaOptions.java</span></div><h1>AkkaOptions.java</h1><pre class="source lang-java linenums">/*
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * &quot;License&quot;); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package org.apache.flink.configuration;

import org.apache.flink.annotation.PublicEvolving;
import org.apache.flink.configuration.description.Description;

import static org.apache.flink.configuration.description.LinkElement.link;

/** Akka configuration options. */
@PublicEvolving
<span class="nc" id="L28">public class AkkaOptions {</span>

    /** Flag whether to capture call stacks for RPC ask calls. */
<span class="nc" id="L31">    public static final ConfigOption&lt;Boolean&gt; CAPTURE_ASK_CALLSTACK =</span>
<span class="nc" id="L32">            ConfigOptions.key(&quot;akka.ask.callstack&quot;)</span>
<span class="nc" id="L33">                    .booleanType()</span>
<span class="nc" id="L34">                    .defaultValue(true)</span>
<span class="nc" id="L35">                    .withDescription(</span>
                            &quot;If true, call stack for asynchronous asks are captured. That way, when an ask fails &quot;
                                    + &quot;(for example times out), you get a proper exception, describing to the original method call and &quot;
                                    + &quot;call site. Note that in case of having millions of concurrent RPC calls, this may add to the &quot;
                                    + &quot;memory footprint.&quot;);

    /** Timeout for akka ask calls. */
<span class="nc" id="L42">    public static final ConfigOption&lt;String&gt; ASK_TIMEOUT =</span>
<span class="nc" id="L43">            ConfigOptions.key(&quot;akka.ask.timeout&quot;)</span>
<span class="nc" id="L44">                    .stringType()</span>
<span class="nc" id="L45">                    .defaultValue(&quot;10 s&quot;)</span>
<span class="nc" id="L46">                    .withDescription(</span>
                            &quot;Timeout used for all futures and blocking Akka calls. If Flink fails due to timeouts then you&quot;
                                    + &quot; should try to increase this value. Timeouts can be caused by slow machines or a congested network. The&quot;
                                    + &quot; timeout value requires a time-unit specifier (ms/s/min/h/d).&quot;);
    /** The Akka tcp connection timeout. */
<span class="nc" id="L51">    public static final ConfigOption&lt;String&gt; TCP_TIMEOUT =</span>
<span class="nc" id="L52">            ConfigOptions.key(&quot;akka.tcp.timeout&quot;)</span>
<span class="nc" id="L53">                    .stringType()</span>
<span class="nc" id="L54">                    .defaultValue(&quot;20 s&quot;)</span>
<span class="nc" id="L55">                    .withDescription(</span>
                            &quot;Timeout for all outbound connections. If you should experience problems with connecting to a&quot;
                                    + &quot; TaskManager due to a slow network, you should increase this value.&quot;);

    /** Timeout for the startup of the actor system. */
<span class="nc" id="L60">    public static final ConfigOption&lt;String&gt; STARTUP_TIMEOUT =</span>
<span class="nc" id="L61">            ConfigOptions.key(&quot;akka.startup-timeout&quot;)</span>
<span class="nc" id="L62">                    .stringType()</span>
<span class="nc" id="L63">                    .noDefaultValue()</span>
<span class="nc" id="L64">                    .withDescription(</span>
                            &quot;Timeout after which the startup of a remote component is considered being failed.&quot;);

    /** Override SSL support for the Akka transport. */
<span class="nc" id="L68">    public static final ConfigOption&lt;Boolean&gt; SSL_ENABLED =</span>
<span class="nc" id="L69">            ConfigOptions.key(&quot;akka.ssl.enabled&quot;)</span>
<span class="nc" id="L70">                    .booleanType()</span>
<span class="nc" id="L71">                    .defaultValue(true)</span>
<span class="nc" id="L72">                    .withDescription(</span>
                            &quot;Turns on SSL for Akka’s remote communication. This is applicable only when the global ssl flag&quot;
                                    + &quot; security.ssl.enabled is set to true.&quot;);

    /** Maximum framesize of akka messages. */
<span class="nc" id="L77">    public static final ConfigOption&lt;String&gt; FRAMESIZE =</span>
<span class="nc" id="L78">            ConfigOptions.key(&quot;akka.framesize&quot;)</span>
<span class="nc" id="L79">                    .stringType()</span>
<span class="nc" id="L80">                    .defaultValue(&quot;10485760b&quot;)</span>
<span class="nc" id="L81">                    .withDescription(</span>
                            &quot;Maximum size of messages which are sent between the JobManager and the TaskManagers. If Flink&quot;
                                    + &quot; fails because messages exceed this limit, then you should increase it. The message size requires a&quot;
                                    + &quot; size-unit specifier.&quot;);

    /** Maximum number of messages until another actor is executed by the same thread. */
<span class="nc" id="L87">    public static final ConfigOption&lt;Integer&gt; DISPATCHER_THROUGHPUT =</span>
<span class="nc" id="L88">            ConfigOptions.key(&quot;akka.throughput&quot;)</span>
<span class="nc" id="L89">                    .intType()</span>
<span class="nc" id="L90">                    .defaultValue(15)</span>
<span class="nc" id="L91">                    .withDescription(</span>
                            &quot;Number of messages that are processed in a batch before returning the thread to the pool. Low&quot;
                                    + &quot; values denote a fair scheduling whereas high values can increase the performance at the cost of unfairness.&quot;);

    /** Log lifecycle events. */
<span class="nc" id="L96">    public static final ConfigOption&lt;Boolean&gt; LOG_LIFECYCLE_EVENTS =</span>
<span class="nc" id="L97">            ConfigOptions.key(&quot;akka.log.lifecycle.events&quot;)</span>
<span class="nc" id="L98">                    .booleanType()</span>
<span class="nc" id="L99">                    .defaultValue(false)</span>
<span class="nc" id="L100">                    .withDescription(</span>
                            &quot;Turns on the Akka’s remote logging of events. Set this value to 'true' in case of debugging.&quot;);

    /** Timeout for all blocking calls that look up remote actors. */
<span class="nc" id="L104">    public static final ConfigOption&lt;String&gt; LOOKUP_TIMEOUT =</span>
<span class="nc" id="L105">            ConfigOptions.key(&quot;akka.lookup.timeout&quot;)</span>
<span class="nc" id="L106">                    .stringType()</span>
<span class="nc" id="L107">                    .defaultValue(&quot;10 s&quot;)</span>
<span class="nc" id="L108">                    .withDescription(</span>
                            &quot;Timeout used for the lookup of the JobManager. The timeout value has to contain a time-unit&quot;
                                    + &quot; specifier (ms/s/min/h/d).&quot;);

    /**
     * Timeout for all blocking calls on the client side.
     *
     * @deprecated Use the {@code ClientOptions.CLIENT_TIMEOUT} instead.
     */
    @Deprecated
<span class="nc" id="L118">    public static final ConfigOption&lt;String&gt; CLIENT_TIMEOUT =</span>
<span class="nc" id="L119">            ConfigOptions.key(&quot;akka.client.timeout&quot;)</span>
<span class="nc" id="L120">                    .stringType()</span>
<span class="nc" id="L121">                    .defaultValue(&quot;60 s&quot;)</span>
<span class="nc" id="L122">                    .withDescription(</span>
                            &quot;DEPRECATED: Use the \&quot;client.timeout\&quot; instead.&quot;
                                    + &quot; Timeout for all blocking calls on the client side.&quot;);

    /** Exit JVM on fatal Akka errors. */
<span class="nc" id="L127">    public static final ConfigOption&lt;Boolean&gt; JVM_EXIT_ON_FATAL_ERROR =</span>
<span class="nc" id="L128">            ConfigOptions.key(&quot;akka.jvm-exit-on-fatal-error&quot;)</span>
<span class="nc" id="L129">                    .booleanType()</span>
<span class="nc" id="L130">                    .defaultValue(true)</span>
<span class="nc" id="L131">                    .withDescription(&quot;Exit JVM on fatal Akka errors.&quot;);</span>

    /** Milliseconds a gate should be closed for after a remote connection was disconnected. */
<span class="nc" id="L134">    public static final ConfigOption&lt;Long&gt; RETRY_GATE_CLOSED_FOR =</span>
<span class="nc" id="L135">            ConfigOptions.key(&quot;akka.retry-gate-closed-for&quot;)</span>
<span class="nc" id="L136">                    .longType()</span>
<span class="nc" id="L137">                    .defaultValue(50L)</span>
<span class="nc" id="L138">                    .withDescription(</span>
                            &quot;Milliseconds a gate should be closed for after a remote connection was disconnected.&quot;);

    // ==================================================
    // Configurations for fork-join-executor.
    // ==================================================

<span class="nc" id="L145">    public static final ConfigOption&lt;Double&gt; FORK_JOIN_EXECUTOR_PARALLELISM_FACTOR =</span>
<span class="nc" id="L146">            ConfigOptions.key(&quot;akka.fork-join-executor.parallelism-factor&quot;)</span>
<span class="nc" id="L147">                    .doubleType()</span>
<span class="nc" id="L148">                    .defaultValue(2.0)</span>
<span class="nc" id="L149">                    .withDescription(</span>
<span class="nc" id="L150">                            Description.builder()</span>
<span class="nc" id="L151">                                    .text(</span>
                                            &quot;The parallelism factor is used to determine thread pool size using the&quot;
                                                    + &quot; following formula: ceil(available processors * factor). Resulting size&quot;
                                                    + &quot; is then bounded by the parallelism-min and parallelism-max values.&quot;)
<span class="nc" id="L155">                                    .build());</span>

<span class="nc" id="L157">    public static final ConfigOption&lt;Integer&gt; FORK_JOIN_EXECUTOR_PARALLELISM_MIN =</span>
<span class="nc" id="L158">            ConfigOptions.key(&quot;akka.fork-join-executor.parallelism-min&quot;)</span>
<span class="nc" id="L159">                    .intType()</span>
<span class="nc" id="L160">                    .defaultValue(8)</span>
<span class="nc" id="L161">                    .withDescription(</span>
<span class="nc" id="L162">                            Description.builder()</span>
<span class="nc" id="L163">                                    .text(</span>
                                            &quot;Min number of threads to cap factor-based parallelism number to.&quot;)
<span class="nc" id="L165">                                    .build());</span>

<span class="nc" id="L167">    public static final ConfigOption&lt;Integer&gt; FORK_JOIN_EXECUTOR_PARALLELISM_MAX =</span>
<span class="nc" id="L168">            ConfigOptions.key(&quot;akka.fork-join-executor.parallelism-max&quot;)</span>
<span class="nc" id="L169">                    .intType()</span>
<span class="nc" id="L170">                    .defaultValue(64)</span>
<span class="nc" id="L171">                    .withDescription(</span>
<span class="nc" id="L172">                            Description.builder()</span>
<span class="nc" id="L173">                                    .text(</span>
                                            &quot;Max number of threads to cap factor-based parallelism number to.&quot;)
<span class="nc" id="L175">                                    .build());</span>

    // ==================================================
    // Configurations for client-socket-work-pool.
    // ==================================================

<span class="nc" id="L181">    public static final ConfigOption&lt;Integer&gt; CLIENT_SOCKET_WORKER_POOL_SIZE_MIN =</span>
<span class="nc" id="L182">            ConfigOptions.key(&quot;akka.client-socket-worker-pool.pool-size-min&quot;)</span>
<span class="nc" id="L183">                    .intType()</span>
<span class="nc" id="L184">                    .defaultValue(1)</span>
<span class="nc" id="L185">                    .withDescription(</span>
<span class="nc" id="L186">                            Description.builder()</span>
<span class="nc" id="L187">                                    .text(&quot;Min number of threads to cap factor-based number to.&quot;)</span>
<span class="nc" id="L188">                                    .build());</span>

<span class="nc" id="L190">    public static final ConfigOption&lt;Integer&gt; CLIENT_SOCKET_WORKER_POOL_SIZE_MAX =</span>
<span class="nc" id="L191">            ConfigOptions.key(&quot;akka.client-socket-worker-pool.pool-size-max&quot;)</span>
<span class="nc" id="L192">                    .intType()</span>
<span class="nc" id="L193">                    .defaultValue(2)</span>
<span class="nc" id="L194">                    .withDescription(</span>
<span class="nc" id="L195">                            Description.builder()</span>
<span class="nc" id="L196">                                    .text(&quot;Max number of threads to cap factor-based number to.&quot;)</span>
<span class="nc" id="L197">                                    .build());</span>

<span class="nc" id="L199">    public static final ConfigOption&lt;Double&gt; CLIENT_SOCKET_WORKER_POOL_SIZE_FACTOR =</span>
<span class="nc" id="L200">            ConfigOptions.key(&quot;akka.client-socket-worker-pool.pool-size-factor&quot;)</span>
<span class="nc" id="L201">                    .doubleType()</span>
<span class="nc" id="L202">                    .defaultValue(1.0)</span>
<span class="nc" id="L203">                    .withDescription(</span>
<span class="nc" id="L204">                            Description.builder()</span>
<span class="nc" id="L205">                                    .text(</span>
                                            &quot;The pool size factor is used to determine thread pool size&quot;
                                                    + &quot; using the following formula: ceil(available processors * factor).&quot;
                                                    + &quot; Resulting size is then bounded by the pool-size-min and&quot;
                                                    + &quot; pool-size-max values.&quot;)
<span class="nc" id="L210">                                    .build());</span>

    // ==================================================
    // Configurations for server-socket-work-pool.
    // ==================================================

<span class="nc" id="L216">    public static final ConfigOption&lt;Integer&gt; SERVER_SOCKET_WORKER_POOL_SIZE_MIN =</span>
<span class="nc" id="L217">            ConfigOptions.key(&quot;akka.server-socket-worker-pool.pool-size-min&quot;)</span>
<span class="nc" id="L218">                    .intType()</span>
<span class="nc" id="L219">                    .defaultValue(1)</span>
<span class="nc" id="L220">                    .withDescription(</span>
<span class="nc" id="L221">                            Description.builder()</span>
<span class="nc" id="L222">                                    .text(&quot;Min number of threads to cap factor-based number to.&quot;)</span>
<span class="nc" id="L223">                                    .build());</span>

<span class="nc" id="L225">    public static final ConfigOption&lt;Integer&gt; SERVER_SOCKET_WORKER_POOL_SIZE_MAX =</span>
<span class="nc" id="L226">            ConfigOptions.key(&quot;akka.server-socket-worker-pool.pool-size-max&quot;)</span>
<span class="nc" id="L227">                    .intType()</span>
<span class="nc" id="L228">                    .defaultValue(2)</span>
<span class="nc" id="L229">                    .withDescription(</span>
<span class="nc" id="L230">                            Description.builder()</span>
<span class="nc" id="L231">                                    .text(&quot;Max number of threads to cap factor-based number to.&quot;)</span>
<span class="nc" id="L232">                                    .build());</span>

<span class="nc" id="L234">    public static final ConfigOption&lt;Double&gt; SERVER_SOCKET_WORKER_POOL_SIZE_FACTOR =</span>
<span class="nc" id="L235">            ConfigOptions.key(&quot;akka.server-socket-worker-pool.pool-size-factor&quot;)</span>
<span class="nc" id="L236">                    .doubleType()</span>
<span class="nc" id="L237">                    .defaultValue(1.0)</span>
<span class="nc" id="L238">                    .withDescription(</span>
<span class="nc" id="L239">                            Description.builder()</span>
<span class="nc" id="L240">                                    .text(</span>
                                            &quot;The pool size factor is used to determine thread pool size&quot;
                                                    + &quot; using the following formula: ceil(available processors * factor).&quot;
                                                    + &quot; Resulting size is then bounded by the pool-size-min and&quot;
                                                    + &quot; pool-size-max values.&quot;)
<span class="nc" id="L245">                                    .build());</span>

    // ==================================================
    // Deprecated options
    // ==================================================

    /**
     * The Akka death watch heartbeat interval.
     *
     * @deprecated Don't use this option anymore. It has no effect on Flink.
     */
    @Deprecated
<span class="nc" id="L257">    public static final ConfigOption&lt;String&gt; WATCH_HEARTBEAT_INTERVAL =</span>
<span class="nc" id="L258">            ConfigOptions.key(&quot;akka.watch.heartbeat.interval&quot;)</span>
<span class="nc" id="L259">                    .defaultValue(ASK_TIMEOUT.defaultValue())</span>
<span class="nc" id="L260">                    .withDescription(</span>
<span class="nc" id="L261">                            Description.builder()</span>
<span class="nc" id="L262">                                    .text(</span>
                                            &quot;Heartbeat interval for Akka’s DeathWatch mechanism to detect dead TaskManagers. If&quot;
                                                    + &quot; TaskManagers are wrongly marked dead because of lost or delayed heartbeat messages, then you&quot;
                                                    + &quot; should decrease this value or increase akka.watch.heartbeat.pause. A thorough description of&quot;
                                                    + &quot; Akka’s DeathWatch can be found %s&quot;,
<span class="nc" id="L267">                                            link(</span>
                                                    &quot;http://doc.akka.io/docs/akka/snapshot/scala/remoting.html#failure-detector&quot;,
                                                    &quot;here&quot;))
<span class="nc" id="L270">                                    .build());</span>

    /**
     * The maximum acceptable Akka death watch heartbeat pause.
     *
     * @deprecated Don't use this option anymore. It has no effect on Flink.
     */
    @Deprecated
<span class="nc" id="L278">    public static final ConfigOption&lt;String&gt; WATCH_HEARTBEAT_PAUSE =</span>
<span class="nc" id="L279">            ConfigOptions.key(&quot;akka.watch.heartbeat.pause&quot;)</span>
<span class="nc" id="L280">                    .defaultValue(&quot;60 s&quot;)</span>
<span class="nc" id="L281">                    .withDescription(</span>
<span class="nc" id="L282">                            Description.builder()</span>
<span class="nc" id="L283">                                    .text(</span>
                                            &quot;Acceptable heartbeat pause for Akka’s DeathWatch mechanism. A low value does not allow an&quot;
                                                    + &quot; irregular heartbeat. If TaskManagers are wrongly marked dead because of lost or delayed&quot;
                                                    + &quot; heartbeat messages, then you should increase this value or decrease akka.watch.heartbeat.interval.&quot;
                                                    + &quot; Higher value increases the time to detect a dead TaskManager. A thorough description of Akka’s&quot;
                                                    + &quot; DeathWatch can be found %s&quot;,
<span class="nc" id="L289">                                            link(</span>
                                                    &quot;http://doc.akka.io/docs/akka/snapshot/scala/remoting.html#failure-detector&quot;,
                                                    &quot;here&quot;))
<span class="nc" id="L292">                                    .build());</span>

    /**
     * Detection threshold for the phi accrual watch failure detector.
     *
     * @deprecated Don't use this option anymore. It has no effect on Flink.
     */
    @Deprecated
<span class="nc" id="L300">    public static final ConfigOption&lt;Integer&gt; WATCH_THRESHOLD =</span>
<span class="nc" id="L301">            ConfigOptions.key(&quot;akka.watch.threshold&quot;)</span>
<span class="nc" id="L302">                    .defaultValue(12)</span>
<span class="nc" id="L303">                    .withDescription(</span>
<span class="nc" id="L304">                            Description.builder()</span>
<span class="nc" id="L305">                                    .text(</span>
                                            &quot;Threshold for the DeathWatch failure detector. A low value is prone to false positives whereas&quot;
                                                    + &quot; a high value increases the time to detect a dead TaskManager. A thorough description of Akka’s&quot;
                                                    + &quot; DeathWatch can be found %s&quot;,
<span class="nc" id="L309">                                            link(</span>
                                                    &quot;http://doc.akka.io/docs/akka/snapshot/scala/remoting.html#failure-detector&quot;,
                                                    &quot;here&quot;))
<span class="nc" id="L312">                                    .build());</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>